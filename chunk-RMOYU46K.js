import{a as he}from"./chunk-XYDO2IVJ.js";import{a as fe,b as ve,c as w}from"./chunk-ML5Y6O2N.js";import{a as ge,b as y,c as q}from"./chunk-S472JT5E.js";import"./chunk-T6SNZ2SU.js";import"./chunk-RAAZGNEA.js";import"./chunk-XPIKPJFE.js";import"./chunk-WTS7XT4D.js";import"./chunk-YVLEHWOY.js";import"./chunk-BFSNZW6T.js";import"./chunk-IK6GKZLO.js";import"./chunk-TPLJ4PUN.js";import"./chunk-MNLYAPXW.js";import{l as pe}from"./chunk-EWYMWOI3.js";import"./chunk-HE4HGFF6.js";import"./chunk-HYGMGYDW.js";import{b as ie,c as u,d as oe,e as ne,f as k,g as re,h as ae,j as se,k as de,l as le,la as V,m as ce,r as M,s as me,t as O,u as ue,w as P}from"./chunk-GX2JBJOU.js";import{d as te,j as T}from"./chunk-LKSAQKNU.js";import"./chunk-2PA5JSTX.js";import{k as Z,m as $,u as b,w as ee}from"./chunk-OE5DTYP4.js";import{Ac as S,Bc as J,Cc as B,Dc as C,Eb as W,Ec as X,Ia as x,Ja as A,Kb as _,Mb as a,Ta as D,Wb as n,Xb as d,Ya as G,Yb as g,a as R,ac as K,b as j,fc as v,hc as F,nc as Y,oc as Q,pc as H,rb as s,rc as m,sb as E,wc as N,xa as I,xc as z,yc as L}from"./chunk-W7KOHNRA.js";var xe=["searchBox"],_e=o=>({"bg-[#3a5a40]/65 text-white":o}),Ce=(o,p)=>({"text-gray-700":o,"text-white":p}),Ee=(o,p)=>({"text-gray-800":o,"text-white":p}),Ae=(o,p,e)=>({"border-red-500 focus:ring-red-200":o,"border-green-500 focus:ring-green-200":p,"border-gray-300 focus:ring-blue-200":e}),U=(o,p)=>({"border-red-500 focus:ring-red-200":o,"border-gray-300 focus:ring-blue-200":p}),Se=()=>({draggable:!0});function be(o,p){if(o&1&&(n(0,"div",2)(1,"div",13),g(2,"lucide-icon",14),n(3,"h2",15),m(4,"Retiro en Sucursal"),d()(),n(5,"div",16)(6,"div",17),g(7,"lucide-icon",18),n(8,"p",19),m(9," Debes acercarte a nuestra sucursal para retirar tu pedido. "),d()(),n(10,"div",17),g(11,"lucide-icon",20),n(12,"p",19),m(13," Direcci\xF3n: Avenida Espa\xF1a 995, Tandil, Buenos Aires. "),d()(),n(14,"div",17),g(15,"lucide-icon",21),n(16,"p",19),m(17," Horario de atenci\xF3n: Lunes a S\xE1bado, 9:00 AM - 18:00 PM. "),d()()(),n(18,"div",22)(19,"google-map",23),g(20,"map-marker",24),d()()()),o&2){let e=F();s(2),a("size",24),s(5),a("size",16),s(4),a("size",16),s(4),a("size",16),s(4),a("center",e.center)("zoom",e.zoom),s(),a("position",e.center)}}function Te(o,p){o&1&&g(0,"lucide-icon",37),o&2&&a("size",20)}function Me(o,p){o&1&&g(0,"lucide-icon",38),o&2&&a("size",20)}function Oe(o,p){o&1&&(n(0,"p",39),m(1," Solo realizamos env\xEDos dentro de Tandil (CP 7000). "),d())}function Pe(o,p){o&1&&(n(0,"p",39),m(1," El nombre es requerido (m\xEDnimo 3 caracteres) "),d())}function Ve(o,p){o&1&&(n(0,"p",39),m(1," Ingresa un n\xFAmero de tel\xE9fono v\xE1lido "),d())}function we(o,p){o&1&&(n(0,"p",39),m(1," La direcci\xF3n debe estar dentro de Tandil "),d())}function Re(o,p){o&1&&(n(0,"p",39),m(1," La direcci\xF3n debe corresponder al c\xF3digo postal 7000 "),d())}function De(o,p){if(o&1){let e=K();n(0,"form",40)(1,"div",41)(2,"div",30)(3,"label",42),m(4," Nombre del destinatario "),d(),g(5,"input",43),_(6,Pe,2,0,"p",35),d(),n(7,"div",30)(8,"label",42),m(9," Tel\xE9fono del destinatario "),d(),g(10,"input",44),_(11,Ve,2,0,"p",35),d()(),n(12,"div",30)(13,"label",42),m(14," Direcci\xF3n completa de entrega "),d(),n(15,"div",45)(16,"input",46,0),v("input",function(){x(e);let t=F(2);return A(t.onAddressInput())}),d(),n(18,"button",47),v("click",function(){x(e);let t=F(2);return A(t.usarMiUbicacion())}),g(19,"lucide-icon",48),d()(),_(20,we,2,0,"p",35)(21,Re,2,0,"p",35),d(),n(22,"div",22)(23,"google-map",23)(24,"map-marker",49),v("mapClick",function(t){x(e);let r=F(2);return A(r.onMarkerDrag(t))}),d()()(),n(25,"div")(26,"label",42),m(27," Comentarios adicionales "),d(),g(28,"textarea",50),d()()}if(o&2){let e,i,t,r,l,h,f,c=F(2);a("formGroup",c.destinatarioForm),s(5),a("ngClass",C(13,U,((e=c.destinatarioForm.get("nombre"))==null?null:e.invalid)&&((e=c.destinatarioForm.get("nombre"))==null?null:e.touched),!((e=c.destinatarioForm.get("nombre"))!=null&&e.touched))),s(),a("ngIf",((i=c.destinatarioForm.get("nombre"))==null?null:i.invalid)&&((i=c.destinatarioForm.get("nombre"))==null?null:i.touched)),s(4),a("ngClass",C(16,U,((t=c.destinatarioForm.get("telefonoMovil"))==null?null:t.invalid)&&((t=c.destinatarioForm.get("telefonoMovil"))==null?null:t.touched),!((t=c.destinatarioForm.get("telefonoMovil"))!=null&&t.touched))),s(),a("ngIf",((r=c.destinatarioForm.get("telefonoMovil"))==null?null:r.invalid)&&((r=c.destinatarioForm.get("telefonoMovil"))==null?null:r.touched)),s(5),a("ngClass",C(19,U,((l=c.destinatarioForm.get("direccion"))==null?null:l.invalid)&&((l=c.destinatarioForm.get("direccion"))==null?null:l.touched),!((l=c.destinatarioForm.get("direccion"))!=null&&l.touched))),s(3),a("size",20),s(),a("ngIf",(h=c.destinatarioForm.get("direccion"))==null||h.errors==null?null:h.errors.outsideTandil),s(),a("ngIf",(f=c.destinatarioForm.get("direccion"))==null||f.errors==null?null:f.errors.invalidPostalCode),s(2),a("center",c.center)("zoom",c.zoom),s(),a("position",c.center)("options",J(22,Se))}}function Ne(o,p){if(o&1&&(n(0,"div",2)(1,"div",13),g(2,"lucide-icon",25),n(3,"h2",15),m(4,"Datos del Destinatario"),d()(),n(5,"div",26)(6,"div",27),g(7,"lucide-icon",28),n(8,"p",29),m(9," Actualmente, solo realizamos env\xEDos en la ciudad de Tandil (CP: 7000). La entrega se efect\xFAa el mismo d\xEDa. "),d()(),n(10,"div",30),g(11,"input",31),n(12,"div",32),_(13,Te,1,1,"lucide-icon",33)(14,Me,1,1,"lucide-icon",34),d()(),_(15,Oe,2,0,"p",35),d(),_(16,De,29,23,"form",36),d()),o&2){let e=F();s(2),a("size",24),s(5),a("size",16),s(4),a("formControl",e.codigoPostal)("ngClass",X(8,Ae,e.codigoPostalInvalido,e.codigoPostalValido,!e.codigoPostal.touched)),s(2),a("ngIf",e.codigoPostalValido),s(),a("ngIf",e.codigoPostalInvalido&&e.codigoPostal.touched),s(),a("ngIf",e.codigoPostalInvalido&&e.codigoPostal.touched),s(),a("ngIf",e.codigoPostalValido)}}var Fe=(()=>{class o{constructor(e,i,t){this.fb=e,this.store=t,this.formCargado=new D,this.validationError=new D,this.center={lat:-37.320437,lng:-59.139153},this.zoom=10,this.codigoPostal=new k("",[u.required,u.pattern("^7000$")]),this.metodoEntregaControl=new k("",u.required),this.metodoEntrega="domicilio",this.codigoPostalValido=!1,this.codigoPostalInvalido=!1,this.direccionValida=!1,this.TANDIL_BOUNDS={north:-37.25,south:-37.35,east:-59.05,west:-59.25},this.STORE_INFO={direccion:"Avenida Espa\xF1a 995, Tandil, Buenos Aires",latitud:"-37.3207231",longitud:"-59.1330871",ciudad:"Tandil",estado:"Buenos Aires",pais:"Argentina",codigoPostal:"7000"},this.isBrowser=ee(i),this.destinatarioForm=this.fb.group({nombre:["",[u.required,u.minLength(3)]],direccion:["",[u.required,u.minLength(5)]],telefonoMovil:["+54 ",[u.pattern(/^\+54\s?9?\s?\d{2,4}\s?\d{6,8}$/)]],pais:["Argentina"],estado:["Buenos Aires"],ciudad:["Tandil"],comentarios:[""],latitud:[""],longitud:[""],codigoPostal:this.codigoPostal}),this.codigoPostal.valueChanges.subscribe(()=>{this.metodoEntrega!=="sucursal"&&this.validarCodigoPostal()}),this.destinatarioForm.valueChanges.subscribe(()=>{let r={formValid:this.destinatarioForm.valid,direccionValida:this.direccionValida,codigoPostalValido:this.codigoPostalValido,metodoEntrega:this.metodoEntrega,formValues:this.destinatarioForm.value,formErrors:Object.keys(this.destinatarioForm.controls).reduce((h,f)=>{let c=this.destinatarioForm.get(f);return h[f]=c?.errors,h},{})};console.log("Form Validation State:",r),this.metodoEntrega==="sucursal"||this.destinatarioForm.valid&&this.direccionValida&&this.codigoPostalValido?(console.log("Emitting form value:",this.destinatarioForm.value),this.formCargado.emit(this.destinatarioForm.value),this.metodoEntrega==="sucursal"?this.store.dispatch(y({method:"PICKUP"})):(this.store.dispatch(y({method:"DELIVERY"})),this.store.dispatch(ge({deliveryInfo:{nombre:this.destinatarioForm.value.nombre,direccion:this.destinatarioForm.value.direccion,ciudad:this.destinatarioForm.value.ciudad,estado:this.destinatarioForm.value.estado,pais:this.destinatarioForm.value.pais,codigoPostal:this.destinatarioForm.value.codigoPostal,telefonoMovil:this.destinatarioForm.value.telefonoMovil,metodoEnvio:"DELIVERY",comentarios:this.destinatarioForm.value.comentarios}}))),this.store.dispatch(q({isValid:!0}))):(console.log("Emitting null - Form invalid"),this.formCargado.emit(null),this.store.dispatch(q({isValid:!1}))),this.saveDeliveryInfo()})}ngOnInit(){if(this.isBrowser){let e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAdEWtAco97sHxnuCO2C932igIAUKsSRoo&libraries=places",e.async=!0,e.defer=!0,e.onload=()=>{this.initializeAutocomplete()},document.head.appendChild(e)}this.store.dispatch(y({method:"DELIVERY"}))}ngAfterViewInit(){this.isBrowser&&window.google&&this.initializeAutocomplete()}initializeAutocomplete(){!this.isBrowser||!this.searchBox?.nativeElement||(this.autocomplete=new google.maps.places.Autocomplete(this.searchBox.nativeElement,{types:["address"],componentRestrictions:{country:"AR"}}),this.autocomplete.addListener("place_changed",()=>{let e=this.autocomplete?.getPlace();if(e?.geometry?.location){let i=e.geometry.location.lat(),t=e.geometry.location.lng();if(this.isAddressInTandil(i,t)){this.center={lat:i,lng:t},this.zoom=16;let r=this.getAddressComponent(e,"postal_code")||"7000";this.destinatarioForm.patchValue({direccion:e.formatted_address,ciudad:this.getAddressComponent(e,"locality"),estado:this.getAddressComponent(e,"administrative_area_level_1"),pais:this.getAddressComponent(e,"country"),latitud:i.toString(),longitud:t.toString()}),this.codigoPostal.setValue(r),this.direccionValida=!0,this.destinatarioForm.get("direccion")?.setErrors(null),this.validarCodigoPostal()}else this.direccionValida=!1,this.validationError.emit("La direcci\xF3n debe estar dentro de Tandil"),this.destinatarioForm.get("direccion")?.setErrors({outsideTandil:!0})}}))}validarCodigoPostal(){if(this.metodoEntrega==="sucursal"){console.log("C\xF3digo postal: Retiro en sucursal - validaci\xF3n omitida"),this.codigoPostalValido=!0,this.codigoPostalInvalido=!1;return}let e=this.codigoPostal.value;console.log("Validando c\xF3digo postal:",{codigo:e,esValido:e==="7000"}),this.codigoPostalValido=e==="7000",this.codigoPostalInvalido=!this.codigoPostalValido,this.codigoPostalValido?(console.log("C\xF3digo postal v\xE1lido"),this.destinatarioForm.get("direccion")?.setErrors(null),this.destinatarioForm.patchValue({codigoPostal:e},{emitEvent:!1})):(console.log("C\xF3digo postal inv\xE1lido"),this.validationError.emit("Solo se permiten env\xEDos al c\xF3digo postal 7000 (Tandil)"),this.destinatarioForm.get("direccion")?.setErrors({invalidPostalCode:!0}))}seleccionarSucursal(e){let i=this.metodoEntrega==="sucursal"?"PICKUP":"DELIVERY";this.store.dispatch(y({method:i})),this.metodoEntrega==="sucursal"?(this.destinatarioForm.patchValue({direccion:this.STORE_INFO.direccion,latitud:this.STORE_INFO.latitud,longitud:this.STORE_INFO.longitud,ciudad:this.STORE_INFO.ciudad,estado:this.STORE_INFO.estado,pais:this.STORE_INFO.pais,codigoPostal:this.STORE_INFO.codigoPostal}),this.center={lat:parseFloat(this.STORE_INFO.latitud),lng:parseFloat(this.STORE_INFO.longitud)},this.zoom=16,this.codigoPostalValido=!0,this.codigoPostalInvalido=!1,this.direccionValida=!0,Object.keys(this.destinatarioForm.controls).forEach(t=>{let r=this.destinatarioForm.get(t);r&&(r.setErrors(null),r.markAsTouched())}),this.saveDeliveryInfo()):(this.destinatarioForm.reset({pais:"Argentina",estado:"Buenos Aires",ciudad:"Tandil"}),this.codigoPostalValido=!1,this.codigoPostalInvalido=!1,this.direccionValida=!1,this.center={lat:-37.320437,lng:-59.139153},this.zoom=10,["nombre","direccion","telefonoMovil"].forEach(t=>{let r=this.destinatarioForm.get(t);r&&(r.setErrors({required:!0}),r.markAsTouched())}),localStorage.removeItem("deliveryInfo")),this.metodoEntrega==="sucursal"?this.formCargado.emit(this.destinatarioForm.value):this.formCargado.emit(null)}handleAddressChange(e){let i=e.geometry?.location?.lat(),t=e.geometry?.location?.lng();if(!i||!t){this.validationError.emit("No se pudo obtener la ubicaci\xF3n");return}this.isAddressInTandil(i,t)?(this.center={lat:i,lng:t},this.destinatarioForm.patchValue({direccion:e.formatted_address,ciudad:this.getAddressComponent(e,"locality"),estado:this.getAddressComponent(e,"administrative_area_level_1"),pais:this.getAddressComponent(e,"country"),latitud:i.toString(),longitud:t.toString()}),this.direccionValida=!0,this.validarCodigoPostal()):(this.direccionValida=!1,this.validationError.emit("La direcci\xF3n debe estar dentro de Tandil"),this.destinatarioForm.get("direccion")?.setErrors({outsideTandil:!0}))}isAddressInTandil(e,i){return e>=this.TANDIL_BOUNDS.south&&e<=this.TANDIL_BOUNDS.north&&i>=this.TANDIL_BOUNDS.west&&i<=this.TANDIL_BOUNDS.east}getAddressComponent(e,i){let t=e.address_components?.find(r=>r.types.includes(i));return t?t.long_name:""}onAddressInput(){if(this.direccionValida=!1,this.isBrowser&&window.google){let e=new google.maps.Geocoder,i=this.destinatarioForm.get("direccion")?.value;i&&e.geocode({address:i},(t,r)=>{if(r==="OK"&&t&&t[0]){let l=t[0].geometry.location,h=l.lat(),f=l.lng();this.isAddressInTandil(h,f)?(this.center={lat:h,lng:f},this.zoom=16,this.destinatarioForm.patchValue({latitud:h.toString(),longitud:f.toString(),ciudad:this.getAddressComponent(t[0],"locality"),estado:this.getAddressComponent(t[0],"administrative_area_level_1"),pais:this.getAddressComponent(t[0],"country")}),this.direccionValida=!0,this.destinatarioForm.get("direccion")?.setErrors(null)):(this.direccionValida=!1,this.validationError.emit("La direcci\xF3n debe estar dentro de Tandil"),this.destinatarioForm.get("direccion")?.setErrors({outsideTandil:!0}))}})}}usarMiUbicacion(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let i=e.coords.latitude,t=e.coords.longitude;this.isAddressInTandil(i,t)?(this.center={lat:i,lng:t},this.zoom=16,this.geocodeLocation(i,t)):this.validationError.emit("Tu ubicaci\xF3n est\xE1 fuera de Tandil")},e=>{this.validationError.emit("No se pudo obtener tu ubicaci\xF3n")})}geocodeLocation(e,i){new google.maps.Geocoder().geocode({location:{lat:e,lng:i}},(r,l)=>{if(l==="OK"&&r&&r[0]){let h=r[0];this.destinatarioForm.patchValue({direccion:h.formatted_address,ciudad:"Tandil",estado:"Buenos Aires",pais:"Argentina",latitud:e.toString(),longitud:i.toString()}),this.direccionValida=!0}})}onMarkerDrag(e){if(e.latLng){let i=e.latLng.lat(),t=e.latLng.lng();this.isAddressInTandil(i,t)?(this.center={lat:i,lng:t},this.geocodeLocation(i,t)):this.validationError.emit("La direcci\xF3n debe estar dentro de Tandil")}}onFormValid(e){}saveDeliveryInfo(){if(this.metodoEntrega==="sucursal"||this.destinatarioForm.valid&&this.direccionValida&&this.codigoPostalValido){let e=R(j(R({},this.destinatarioForm.value),{metodoEnvio:this.metodoEntrega==="sucursal"?"PICKUP":"DELIVERY"}),this.metodoEntrega==="sucursal"?{direccion:this.STORE_INFO.direccion,latitud:this.STORE_INFO.latitud,longitud:this.STORE_INFO.longitud,ciudad:this.STORE_INFO.ciudad,estado:this.STORE_INFO.estado,pais:this.STORE_INFO.pais,codigoPostal:this.STORE_INFO.codigoPostal}:{});localStorage.setItem("deliveryInfo",JSON.stringify(e))}else localStorage.removeItem("deliveryInfo")}static{this.\u0275fac=function(i){return new(i||o)(E(M),E(G),E(pe))}}static{this.\u0275cmp=I({type:o,selectors:[["app-form-add-recipient-information"]],viewQuery:function(i,t){if(i&1&&Y(xe,5),i&2){let r;Q(r=H())&&(t.searchBox=r.first)}},outputs:{formCargado:"formCargado",validationError:"validationError"},standalone:!0,features:[S],decls:19,vars:28,consts:[["searchBox",""],[1,"flex","flex-col","gap-4","font-sans"],[1,"container","mx-auto","max-w-4xl","p-4","bg-white","w-full","shadow","rounded-[4px]"],[1,"text-2xl","font-semibold","mb-4","text-gray-800"],[1,"flex","gap-4"],[1,"flex-1"],["type","radio","value","domicilio","name","entrega",1,"hidden",3,"ngModelChange","change","ngModel"],[1,"flex","items-center","p-4","border","rounded-[4px]","shadow","cursor-pointer","transition-colors","duration-200",3,"ngClass"],["name","truck",3,"size","ngClass"],[1,"ml-2","font-semibold",3,"ngClass"],["type","radio","value","sucursal","name","entrega",1,"hidden",3,"ngModelChange","change","ngModel"],["name","store",3,"size","ngClass"],["class","container mx-auto max-w-4xl p-4 bg-white w-full shadow rounded-[4px]",4,"ngIf"],[1,"flex","items-center","gap-4","mb-4"],["name","store",1,"text-gray-700",3,"size"],[1,"text-2xl","font-semibold","text-gray-800"],[1,"flex","flex-col","gap-2","mb-4"],[1,"flex","items-center","gap-4","p-2"],["name","info",1,"text-gray-600",3,"size"],[1,"text-base","font-medium","text-gray-700"],["name","map-pin",1,"text-gray-600",3,"size"],["name","clock",1,"text-gray-600",3,"size"],[1,"w-full","h-[200px]","rounded","shadow-lg","overflow-hidden"],["width","100%","height","100%",3,"center","zoom"],[3,"position"],["name","truck",1,"text-gray-700",3,"size"],[1,"mb-4"],[1,"flex","items-center","gap-2","mb-2"],["name","mail",1,"text-gray-600",3,"size"],[1,"text-sm","text-gray-600"],[1,"relative"],["type","text","placeholder","Ingresa el c\xF3digo postal (7000)",1,"p-2","w-full","border","rounded-[4px]","focus:outline-none","focus:ring-2",3,"formControl","ngClass"],[1,"absolute","right-2","top-2"],["name","check-circle","class","text-green-500",3,"size",4,"ngIf"],["name","x-circle","class","text-red-500",3,"size",4,"ngIf"],["class","mt-1 text-sm text-red-500",4,"ngIf"],["class","space-y-4",3,"formGroup",4,"ngIf"],["name","check-circle",1,"text-green-500",3,"size"],["name","x-circle",1,"text-red-500",3,"size"],[1,"mt-1","text-sm","text-red-500"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["formControlName","nombre","type","text","placeholder","Nombre completo",1,"p-2","w-full","border","rounded-[4px]","focus:outline-none","focus:ring-2",3,"ngClass"],["formControlName","telefonoMovil","type","tel","placeholder","+54 9 249 1234567",1,"p-2","w-full","border","rounded-[4px]","focus:outline-none","focus:ring-2",3,"ngClass"],[1,"flex","gap-2"],["formControlName","direccion","type","text","placeholder","Ingresa la direcci\xF3n completa",1,"p-2","flex-1","border","rounded-[4px]","focus:outline-none","focus:ring-2",3,"input","ngClass"],["type","button",1,"p-2","bg-gray-800","text-white","round","ed-[4px]","hover:bg-gray-700","transition-colors",3,"click"],["name","map-pin",3,"size"],[3,"mapClick","position","options"],["formControlName","comentarios","rows","3","placeholder","Instrucciones especiales de entrega (opcional)",1,"p-2","w-full","border","border-gray-300","rounded-[4px]","focus:outline-none","focus:ring-2","focus:ring-blue-200"]],template:function(i,t){i&1&&(n(0,"div",1)(1,"div",2)(2,"h2",3),m(3,"M\xE9todo de Entrega"),d(),n(4,"div",4)(5,"label",5)(6,"input",6),L("ngModelChange",function(l){return z(t.metodoEntrega,l)||(t.metodoEntrega=l),l}),v("change",function(l){return t.seleccionarSucursal(l)}),d(),n(7,"div",7),g(8,"lucide-icon",8),n(9,"span",9),m(10,"Env\xEDo a Domicilio"),d()()(),n(11,"label",5)(12,"input",10),L("ngModelChange",function(l){return z(t.metodoEntrega,l)||(t.metodoEntrega=l),l}),v("change",function(l){return t.seleccionarSucursal(l)}),d(),n(13,"div",7),g(14,"lucide-icon",11),n(15,"span",9),m(16,"Retiro en Sucursal"),d()()()()(),_(17,be,21,7,"div",12)(18,Ne,17,12,"div",12),d()),i&2&&(s(6),N("ngModel",t.metodoEntrega),s(),a("ngClass",B(12,_e,t.metodoEntrega==="domicilio")),s(),a("size",24)("ngClass",C(14,Ce,t.metodoEntrega!=="domicilio",t.metodoEntrega==="domicilio")),s(),a("ngClass",C(17,Ee,t.metodoEntrega!=="domicilio",t.metodoEntrega==="domicilio")),s(3),N("ngModel",t.metodoEntrega),s(),a("ngClass",B(20,_e,t.metodoEntrega==="sucursal")),s(),a("size",24)("ngClass",C(22,Ce,t.metodoEntrega!=="sucursal",t.metodoEntrega==="sucursal")),s(),a("ngClass",C(25,Ee,t.metodoEntrega!=="sucursal",t.metodoEntrega==="sucursal")),s(2),a("ngIf",t.metodoEntrega==="sucursal"),s(),a("ngIf",t.metodoEntrega==="domicilio"))},dependencies:[T,V,P,ue,b,Z,$,w,fe,ve,O,ae,ie,se,oe,ne,de,le,ce,me,re],styles:["h2[_ngcontent-%COMP%], p[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin:0}"]})}}return o})();var ut=(()=>{class o{constructor(e,i){this.fb=e,this._router=i,this.isDisabledMp=W(!0),this.center={lat:-37.320437,lng:-59.139153},this.zoom=15,this.options={types:["address"],componentRestrictions:{country:"AR"}},this.destinatarioForm=this.fb.group({nombre:["",u.required],direccion:["",u.required],telefono:["",[u.required,u.pattern(/^\+549\s\d{2}\s\d{8}$/)]],telefonoMovil:["",[u.required,u.pattern(/^\+549\s\d{2}\s\d{8}$/)]],pais:["Argentina",u.required],estado:["Buenos Aires",u.required],ciudad:["",u.required],comentarios:[""]})}handleAddressChange(e){this.center={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},this.destinatarioForm.patchValue({direccion:e.formatted_address,ciudad:this.getAddressComponent(e,"locality"),estado:this.getAddressComponent(e,"administrative_area_level_1"),pais:this.getAddressComponent(e,"country")})}getAddressComponent(e,i){let t=e.address_components.find(r=>r.types.includes(i));return t?t.long_name:""}procesarCompra(){console.log("Compra en proceso..."),this._router.navigate(["/card-order-check-payments"])}recibirFormulario(e){console.log("Formulario cargado:",e)}onSubmit(){this.destinatarioForm.valid&&console.log("Formulario enviado:",this.destinatarioForm.value),this._router.navigate(["/card-order-check-payments"])}static{this.\u0275fac=function(i){return new(i||o)(E(M),E(te))}}static{this.\u0275cmp=I({type:o,selectors:[["app-card-order-map"]],standalone:!0,features:[S],decls:4,vars:2,consts:[[1,"container","max-w-[1200px]","mx-auto","py-4","min-h-[calc(100vh-325px)]","lg:min-h-[calc(100vh-305px)]"],[1,"w-full","h-full","flex-1","flex","flex-col","lg:flex-row","justify-center","items-start","gap-4","px-4"],[1,"w-full",3,"formCargado"],[1,"w-full","lg:w-auto",3,"continuarCompra","IsButtom","isDisabledMp"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"app-form-add-recipient-information",2),v("formCargado",function(l){return t.recibirFormulario(l)}),d(),n(3,"app-purchase-summary",3),v("continuarCompra",function(){return t.procesarCompra()}),d()()()),i&2&&(s(3),a("IsButtom",!0)("isDisabledMp",t.isDisabledMp()))},dependencies:[T,V,P,b,w,O,Fe,he],styles:[".custom-height[_ngcontent-%COMP%]{min-height:calc(100vh - 449px)}h3[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}"]})}}return o})();export{ut as CardOrderMapComponent};
