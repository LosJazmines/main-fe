import{a as z}from"./chunk-YVLEHWOY.js";import{a as N}from"./chunk-BFSNZW6T.js";import{a as B}from"./chunk-TPLJ4PUN.js";import{a as D}from"./chunk-MNLYAPXW.js";import{l as R}from"./chunk-EWYMWOI3.js";import{a as u}from"./chunk-HE4HGFF6.js";import{a as F}from"./chunk-HYGMGYDW.js";import{J as L,b as y,c as m,d as k,e as S,h as E,l as T,la as V,m as j,r as A,t as G,w as I}from"./chunk-GX2JBJOU.js";import{j as v}from"./chunk-LKSAQKNU.js";import{u as w}from"./chunk-OE5DTYP4.js";import{Ac as P,Mb as x,Ta as _,Wb as e,Xb as l,Ya as h,Yb as g,a as p,b as d,fc as s,nc as M,oc as b,pc as O,rb as C,rc as i,sb as c,xa as f}from"./chunk-W7KOHNRA.js";var $=["googleBtn"],pt=(()=>{class a{constructor(o,t,n,r,Q,U,q){this._fb=o,this.dialogRef=t,this.platformId=n,this._authService=r,this.store=Q,this._tokenService=U,this._messageService=q,this.hide=!0,this.formTouched=!1,this.setViewType=new _}ngOnInit(){this.initGroupLogin()}ngOnDestroy(){this._unsuscribeAll&&this._unsuscribeAll.unsubscribe()}initGroupLogin(){this.loginGroup=this._fb.group({email:["",[m.required,m.email]],password:["",[m.required]]})}redirectToGoogleAuth(){try{console.log("Redirecting to Google auth endpoint:",`${u.api}/auth/google`),window.location.href=`${u.api}/auth/google`}catch(o){console.error("Error redirecting to Google auth:",o),this._messageService.showError("Error al iniciar sesi\xF3n con Google. Por favor, intente de nuevo.","top right",5e3,"Aceptar")}}submitEvent(){this.loginUser()}loginUser(){if(this.loginGroup.valid){let o=this.loginGroup.value;this._authService.login(o.email,o.password).subscribe({next:t=>{this._tokenService.setToken(t.token);let n=d(p({},t.user),{token:t.token});this.store.dispatch(D({currentUser:n})),this.dialogRef.close()},error:t=>{console.error("Error al Ingresar usuario:",t)}})}else console.log("Formulario no v\xE1lido")}emitViewType(o){this.setViewType.emit(o)}static{this.\u0275fac=function(t){return new(t||a)(c(A),c(L),c(h),c(z),c(R),c(N),c(B))}}static{this.\u0275cmp=f({type:a,selectors:[["app-login"]],viewQuery:function(t,n){if(t&1&&M($,5),t&2){let r;b(r=O())&&(n.googleBtn=r.first)}},outputs:{setViewType:"setViewType"},standalone:!0,features:[P],decls:37,vars:1,consts:[[1,"w-full","h-full","min-h-[452px]","flex","flex-col","items-center","justify-center","bg-primary","rounded-[4px]","px-8","py-4","z-20"],[1,"title","!text-xl","!font-playfair","!mb-[24px]","text-white"],[1,"login-form","w-full",3,"submit","formGroup"],[1,"flex-1","w-full","mb-2"],["for","email",1,"block","text-sm","font-medium","text-white/80"],["id","email","formControlName","email","type","email","placeholder","Email",1,"mt-1","p-2","w-full","border","border-gray-300","rounded-[4px]","focus:outline-none","focus:ring-2","focus:ring-[#A2E100]/20"],["for","password",1,"block","text-sm","font-medium","text-white/80"],["id","password","formControlName","password","type","password","placeholder","Contrase\xF1a",1,"mt-1","p-2","w-full","border","border-gray-300","rounded-[4px]","focus:outline-none","focus:ring-2","focus:ring-[#A2E100]/20"],[1,"text-right","mt-1"],[1,"text-sm","text-white/80","hover:text-[#A2E100]/50","cursor-pointer",3,"click"],[1,"w-full","text-center"],[1,"w-full","flex","items-center","justify-center","mt-2","py-2"],[1,"text-sm","text-white","mt-4","cursor-pointer","w-full","text-start"],[1,"hover:text-[#A2E100]/50","text-sm",3,"click"],[1,"flex","flex-col","gap-2","w-full"],["type","submit",1,"px-4","py-2","bg-[#3a5a40]/80","text-white","rounded-[4px]","shadow","hover:bg-[#A2E100]/20","focus:outline-none","transition",3,"click"],[1,"tracking-widest"],[1,"w-full"],[1,"google-button",3,"click"],["src","assets/images/google-logo.svg","alt","Google logo"],[1,"w-full","flex","items-center","justify-center","mt-8"]],template:function(t,n){t&1&&(e(0,"div",0)(1,"h1",1),i(2," Iniciar Sesio\u0301n "),l(),e(3,"form",2),s("submit",function(){return n.submitEvent()}),e(4,"div",3)(5,"label",4),i(6,"Email"),l(),g(7,"input",5),l(),e(8,"div",3)(9,"label",6),i(10,"Contrase\xF1a"),l(),g(11,"input",7),e(12,"div",8)(13,"span",9),s("click",function(){return n.emitViewType("forgot-password")}),i(14,"\xBFOlvidaste tu contrase\xF1a?"),l()()(),e(15,"div",10)(16,"div",11)(17,"p",12),i(18," Has olvidado tu contrase\xF1a? "),g(19,"br"),e(20,"span",13),s("click",function(){return n.emitViewType("checkout")}),i(21,"Recuperar contrase\xF1a."),l()()()(),e(22,"div",14)(23,"button",15),s("click",function(){return n.submitEvent()}),e(24,"span",16),i(25," Ingresar"),l()(),e(26,"div",17)(27,"button",18),s("click",function(){return n.redirectToGoogleAuth()}),g(28,"img",19),e(29,"span"),i(30,"Acceder con Google"),l()()()()(),e(31,"div",20)(32,"p",12),i(33," No tienes una cuenta? "),g(34,"br"),e(35,"span",13),s("click",function(){return n.emitViewType("register")}),i(36,"Crear cuenta."),l()()()()),t&2&&(C(3),x("formGroup",n.loginGroup))},dependencies:[w,v,V,G,E,y,k,S,T,j,I],styles:[".google-button-wrapper[_ngcontent-%COMP%]{width:100%;display:block}.google-signin-btn[_ngcontent-%COMP%]{width:100%!important;display:block!important}.google-signin-btn[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%!important;min-width:0!important;max-width:100%!important}button.google-button[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;background-color:#fff;color:#333;border:1px solid #ddd;border-radius:4px;padding:8px 16px;font-size:14px;font-weight:500;cursor:pointer;transition:background-color .3s}button.google-button[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}button.google-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:18px;width:18px;margin-right:8px}.login-container[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]{min-width:744px;height:500px;padding:8px 16px;display:flex;justify-content:center;align-items:center;gap:.5rem;border-radius:12px}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:60%;height:85%;transform:translate(25px);z-index:1}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{z-index:2;width:60%;height:100%;flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;box-shadow:6px 6px 30px #00000040}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;color:#fff;margin-bottom:2rem}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.5rem}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:80%;color:#fff;margin:0}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{color:#fff}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.5rem}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-buttons[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between;align-items:center;gap:1.5rem}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-buttons[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{border-radius:12px}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-buttons[_ngcontent-%COMP%]   .login-button--register[_ngcontent-%COMP%]{background-color:transparent;color:#fff}.login-button--change-password[_ngcontent-%COMP%]{color:#fff;font-size:.8rem;padding:.5rem;margin-bottom:1rem}  .mat-mdc-form-field-subscript-wrapper, .mat-mdc-form-field-bottom-align[_ngcontent-%COMP%]:before{display:none!important}"],data:{animation:[F]}})}}return a})();export{pt as a};
