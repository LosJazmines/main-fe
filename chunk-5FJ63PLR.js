import{a as k}from"./chunk-TPLJ4PUN.js";import{a as me}from"./chunk-HE4HGFF6.js";import{b as J,c as P,d as K,e as X,g as Y,h as Z,l as ee,la as de,m as te,n as ie,o as ne,p as re,r as oe,s as ae,t as se,u as le,v as ce,w as ge}from"./chunk-GX2JBJOU.js";import{j as H}from"./chunk-LKSAQKNU.js";import{b as N,d as z}from"./chunk-2PA5JSTX.js";import{k as O,l as G,m as q,u as R}from"./chunk-OE5DTYP4.js";import{Ac as $,Cc as S,F as j,Ia as g,Ja as d,Kb as x,L as W,Mb as u,Ob as E,Pb as B,Wb as i,Xb as r,Yb as m,ac as f,fc as _,hc as l,ka as L,lb as M,pa as F,qc as D,rb as a,rc as o,sb as V,sc as C,tc as v,uc as I,wc as w,xa as Q,xc as y,yc as b}from"./chunk-W7KOHNRA.js";var ue=(()=>{class s{constructor(e,n){this.http=e,this._messageService=n,this.apiUrl=`${me.api}/store-config`}getStoreConfig(){return this.http.get(`${this.apiUrl}`).pipe(W(e=>{throw console.error("Error loading store config:",e),e}))}updateStoreConfig(e){return this.http.put(`${this.apiUrl}`,e)}uploadBanner(e,n){let t=new FormData;return t.append("image",e),this.http.post(`${this.apiUrl}/banner/${n}`,t)}updateBannerOrder(e,n){return this.http.put(`${this.apiUrl}/banner/${e}/order`,n)}deleteBanner(e,n){return this.http.delete(`${this.apiUrl}/banner/${e}/${encodeURIComponent(n)}`)}getCategories(e){let n=e!==void 0?new N().set("isActive",e.toString()):void 0;return this.http.get(`${this.apiUrl}/categories`,{params:n})}createCategory(e){return this.http.post(`${this.apiUrl}/categories`,e)}updateCategory(e,n){return this.http.put(`${this.apiUrl}/categories/${e}`,n)}deleteCategory(e){return this.http.delete(`${this.apiUrl}/categories/${e}`)}getTags(e,n){let t=new N;return e&&(t=t.set("type",e)),n!==void 0&&(t=t.set("isActive",n.toString())),this.http.get(`${this.apiUrl}/tags`,{params:t})}createTag(e){return this.http.post(`${this.apiUrl}/tags`,e)}updateTag(e,n){return this.http.put(`${this.apiUrl}/tags/${e}`,n)}deleteTag(e){return this.http.delete(`${this.apiUrl}/tags/${e}`)}static{this.\u0275fac=function(n){return new(n||s)(F(z),F(k))}}static{this.\u0275prov=L({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var A=s=>[s,"whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2"],U=s=>({"border-red-500":s});function xe(s,p){s&1&&(i(0,"div",6)(1,"p",7),o(2,"Loading configuration..."),r()())}function ve(s,p){if(s&1&&(i(0,"div",6)(1,"p",8),o(2),r()()),s&2){let e=l();a(2),C(e.error)}}function Ce(s,p){s&1&&(i(0,"div",39)(1,"p",40),o(2,"No banners uploaded yet"),r()())}function we(s,p){if(s&1){let e=f();i(0,"div",55)(1,"div",56)(2,"button",57),_("click",function(){g(e);let t=l(4);return d(t.handleBannerDelete("home",(t.storeConfig==null||t.storeConfig.homeBannerImages==null||t.storeConfig.homeBannerImages[t.currentBannerIndex]==null?null:t.storeConfig.homeBannerImages[t.currentBannerIndex].url)||""))}),m(3,"lucide-icon",58),o(4," Delete Banner "),r(),i(5,"button",59),_("click",function(){g(e);let t=l(4);return d(t.moveBanner("home",t.currentBannerIndex,"left"))}),m(6,"lucide-icon",60),o(7," Move Left "),r(),i(8,"button",59),_("click",function(){g(e);let t=l(4);return d(t.moveBanner("home",t.currentBannerIndex,"right"))}),m(9,"lucide-icon",61),o(10," Move Right "),r()()()}}function ye(s,p){if(s&1){let e=f();i(0,"div",41)(1,"div",42),m(2,"img",43),r(),i(3,"div",44)(4,"div",45)(5,"button",46),_("click",function(){g(e);let t=l(3);return d(t.toggleBannerMenu())}),m(6,"lucide-icon",47),r(),x(7,we,11,0,"div",48),r()(),i(8,"div",49)(9,"span",50),o(10),r(),i(11,"div",51)(12,"button",52),_("click",function(){g(e);let t=l(3);return d(t.prevBanner())}),m(13,"lucide-icon",53),r(),i(14,"button",52),_("click",function(){g(e);let t=l(3);return d(t.nextBanner())}),m(15,"lucide-icon",54),r()()()()}if(s&2){let e=l(3);a(2),u("src",e.storeConfig==null||e.storeConfig.homeBannerImages==null||e.storeConfig.homeBannerImages[e.currentBannerIndex]==null?null:e.storeConfig.homeBannerImages[e.currentBannerIndex].url,M)("alt","Banner "+(e.currentBannerIndex+1)),a(5),u("ngIf",e.showBannerMenu),a(3),I("Banner ",e.currentBannerIndex+1," of ",(e.storeConfig==null||e.storeConfig.homeBannerImages==null?null:e.storeConfig.homeBannerImages.length)||0,""),a(2),u("disabled",e.currentBannerIndex===0),a(2),u("disabled",e.currentBannerIndex===((e.storeConfig==null||e.storeConfig.homeBannerImages==null?null:e.storeConfig.homeBannerImages.length)||0)-1)}}function be(s,p){s&1&&(i(0,"div",39)(1,"p",40),o(2,"No banners uploaded yet"),r()())}function Se(s,p){if(s&1){let e=f();i(0,"div",55)(1,"div",56)(2,"button",57),_("click",function(){g(e);let t=l(4);return d(t.handleBannerDelete("store",(t.storeConfig==null||t.storeConfig.storeBannerImages==null||t.storeConfig.storeBannerImages[t.currentStoreBannerIndex]==null?null:t.storeConfig.storeBannerImages[t.currentStoreBannerIndex].url)||""))}),m(3,"lucide-icon",58),o(4," Delete Banner "),r(),i(5,"button",59),_("click",function(){g(e);let t=l(4);return d(t.moveBanner("store",t.currentStoreBannerIndex,"left"))}),m(6,"lucide-icon",60),o(7," Move Left "),r(),i(8,"button",59),_("click",function(){g(e);let t=l(4);return d(t.moveBanner("store",t.currentStoreBannerIndex,"right"))}),m(9,"lucide-icon",61),o(10," Move Right "),r()()()}}function Te(s,p){if(s&1){let e=f();i(0,"div",41)(1,"div",42),m(2,"img",43),r(),i(3,"div",44)(4,"div",45)(5,"button",46),_("click",function(){g(e);let t=l(3);return d(t.toggleStoreBannerMenu())}),m(6,"lucide-icon",47),r(),x(7,Se,11,0,"div",48),r()(),i(8,"div",49)(9,"span",50),o(10),r(),i(11,"div",51)(12,"button",52),_("click",function(){g(e);let t=l(3);return d(t.prevStoreBanner())}),m(13,"lucide-icon",53),r(),i(14,"button",52),_("click",function(){g(e);let t=l(3);return d(t.nextStoreBanner())}),m(15,"lucide-icon",54),r()()()()}if(s&2){let e=l(3);a(2),u("src",e.storeConfig==null||e.storeConfig.storeBannerImages==null||e.storeConfig.storeBannerImages[e.currentStoreBannerIndex]==null?null:e.storeConfig.storeBannerImages[e.currentStoreBannerIndex].url,M)("alt","Banner "+(e.currentStoreBannerIndex+1)),a(5),u("ngIf",e.showStoreBannerMenu),a(3),I(" Banner ",e.currentStoreBannerIndex+1," of ",(e.storeConfig==null||e.storeConfig.storeBannerImages==null?null:e.storeConfig.storeBannerImages.length)||0," "),a(2),u("disabled",e.currentStoreBannerIndex===0),a(2),u("disabled",e.currentStoreBannerIndex===((e.storeConfig==null||e.storeConfig.storeBannerImages==null?null:e.storeConfig.storeBannerImages.length)||0)-1)}}function Ee(s,p){if(s&1){let e=f();i(0,"section",19)(1,"h2",20),o(2,"Banners"),r(),i(3,"div",21)(4,"h3",22),o(5,"Home Banners"),r(),i(6,"div",23)(7,"div",24),x(8,Ce,3,0,"div",25)(9,ye,16,7,"div",26),r()(),i(10,"div",27)(11,"div",28)(12,"h4",29),o(13," \u{1F4D0} Tama\xF1o de imagen recomendado: "),r(),i(14,"div",30)(15,"p",31),o(16,"1920 x 800 px"),r(),i(17,"p",32),o(18,"Este tama\xF1o asegura una visualizaci\xF3n \xF3ptima en:"),r(),i(19,"ul",33)(20,"li"),o(21,"Desktop: Se mostrar\xE1 en su tama\xF1o completo"),r(),i(22,"li"),o(23,"Tablet: Se ajustar\xE1 autom\xE1ticamente manteniendo la calidad"),r(),i(24,"li"),o(25,"Mobile: Se adaptar\xE1 sin perder definici\xF3n"),r()()(),i(26,"p",34),o(27," \u{1F5BC}\uFE0F Formato: JPG, PNG, o WebP | Resoluci\xF3n: 72 dpi "),r()(),i(28,"input",35,0),_("change",function(t){g(e);let c=l(2);return d(c.handleBannerUpload(t,"home"))}),r(),i(30,"button",36),_("click",function(){g(e);let t=D(29);return d(t.click())}),o(31," Subir banner principal "),m(32,"lucide-icon",37),r()()(),i(33,"div")(34,"h3",22),o(35,"Store Banners"),r(),i(36,"div",38)(37,"div",24),x(38,be,3,0,"div",25)(39,Te,16,7,"div",26),r()(),i(40,"div",27)(41,"div",28)(42,"h4",29),o(43," \u{1F4D0} Tama\xF1o de imagen recomendado: "),r(),i(44,"div",30)(45,"p",31),o(46,"1200 x 200 px"),r(),i(47,"p",32),o(48,"Este tama\xF1o es ideal para banners de tienda:"),r(),i(49,"ul",33)(50,"li"),o(51,"Perfecto para secciones de tienda y categor\xEDas"),r(),i(52,"li"),o(53,"Se adapta bien a todos los dispositivos"),r(),i(54,"li"),o(55,"Mantiene una buena relaci\xF3n calidad/tama\xF1o"),r()()(),i(56,"p",34),o(57," \u{1F5BC}\uFE0F Formato: JPG, PNG, o WebP | Resoluci\xF3n: 72 dpi "),r()(),i(58,"input",35,1),_("change",function(t){g(e);let c=l(2);return d(c.handleBannerUpload(t,"store"))}),r(),i(60,"button",36),_("click",function(){g(e);let t=D(59);return d(t.click())}),o(61," Subir banner de tienda "),m(62,"lucide-icon",37),r()()()()}if(s&2){let e=l(2);a(8),u("ngIf",!(!(e.storeConfig==null||e.storeConfig.homeBannerImages==null)&&e.storeConfig.homeBannerImages.length)),a(),u("ngIf",e.storeConfig==null||e.storeConfig.homeBannerImages==null?null:e.storeConfig.homeBannerImages.length),a(29),u("ngIf",!(!(e.storeConfig==null||e.storeConfig.storeBannerImages==null)&&e.storeConfig.storeBannerImages.length)),a(),u("ngIf",e.storeConfig==null||e.storeConfig.storeBannerImages==null?null:e.storeConfig.storeBannerImages.length)}}function Ie(s,p){if(s&1){let e=f();i(0,"div",87)(1,"div",88)(2,"div",89)(3,"div",90)(4,"div",91)(5,"span",92),o(6),r(),i(7,"span",93),o(8," Category "),r()(),i(9,"div",94),m(10,"lucide-icon",95),i(11,"span"),o(12),r()()(),i(13,"div",91)(14,"div",65)(15,"span",96),o(16,"Status:"),r(),i(17,"button",97),_("click",function(){let t=g(e).$implicit,c=l(3);return d(c.toggleCategoryActive(t))}),m(18,"lucide-icon",98),r()(),i(19,"div",51)(20,"button",99),_("click",function(){let t=g(e).$implicit,c=l(3);return d(c.editCategory(t))}),m(21,"lucide-icon",100),r(),i(22,"button",101),_("click",function(){let t=g(e).$implicit,c=l(3);return d(c.deleteCategory(t.uuid))}),m(23,"lucide-icon",102),r()()()(),i(24,"div",103)(25,"div",104),m(26,"lucide-icon",105),i(27,"div",88)(28,"span",32),o(29,"Value"),r(),i(30,"span",66),o(31),r()()(),i(32,"div",104),m(33,"lucide-icon",106),i(34,"div",88)(35,"span",32),o(36,"ID"),r(),i(37,"span",66),o(38),r()()()()()()}if(s&2){let e=p.$implicit;a(6),C(e.name),a(6),v("Slug: ",e.slug,""),a(5),E("bg-green-100",e.isActive)("bg-gray-100",!e.isActive),a(),E("text-green-500",e.isActive)("text-gray-500",!e.isActive),u("name",e.isActive?"check":"x"),a(13),C(e.value||"No value"),a(7),C(e.uuid)}}function Ve(s,p){if(s&1){let e=f();i(0,"div",107),m(1,"lucide-icon",108),i(2,"h3",109),o(3),r(),i(4,"p",110),o(5),r(),i(6,"button",111),_("click",function(){g(e);let t=l(3);return d(t.showNewCategoryDialog=!0)}),m(7,"lucide-icon",70),o(8," Create Category "),r()()}if(s&2){let e=l(3);a(3),v(" ",e.categorySearchQuery?"No categories found":"No categories yet"," "),a(2),v(" ",e.categorySearchQuery?"Try adjusting your search":"Start by creating your first category"," ")}}function Be(s,p){if(s&1){let e=f();i(0,"section",19)(1,"div",62)(2,"h2",63),o(3,"Categories"),r(),i(4,"div",64)(5,"div",65)(6,"label",66),o(7,"Show:"),r(),i(8,"select",67),b("ngModelChange",function(t){g(e);let c=l(2);return y(c.showActiveCategories,t)||(c.showActiveCategories=t),d(t)}),_("change",function(){g(e);let t=l(2);return d(t.loadData())}),i(9,"option",68),o(10,"Active"),r(),i(11,"option",68),o(12,"Inactive"),r()()(),i(13,"button",69),_("click",function(){g(e);let t=l(2);return d(t.showNewCategoryDialog=!0)}),m(14,"lucide-icon",70),o(15," New Category "),r()()(),i(16,"div",71)(17,"div",45)(18,"input",72),b("ngModelChange",function(t){g(e);let c=l(2);return y(c.categorySearchQuery,t)||(c.categorySearchQuery=t),d(t)}),_("ngModelChange",function(){g(e);let t=l(2);return d(t.onCategorySearchChange())}),r(),i(19,"div",73),m(20,"lucide-icon",74),r()()(),i(21,"div",75),x(22,Ie,39,13,"div",76)(23,Ve,9,2,"div",77),r(),i(24,"div",78)(25,"div",65)(26,"span",79),o(27,"Show"),r(),i(28,"select",67),b("ngModelChange",function(t){g(e);let c=l(2);return y(c.categoriesPerPage,t)||(c.categoriesPerPage=t),d(t)}),_("change",function(){g(e);let t=l(2);return d(t.onCategoriesPerPageChange())}),i(29,"option",80),o(30,"4"),r(),i(31,"option",81),o(32,"8"),r(),i(33,"option",82),o(34,"12"),r(),i(35,"option",83),o(36,"16"),r()(),i(37,"span",79),o(38,"per page"),r()(),i(39,"div",65)(40,"button",84),_("click",function(){g(e);let t=l(2);return d(t.prevCategoriesPage())}),m(41,"lucide-icon",85),r(),i(42,"span",79),o(43),r(),i(44,"button",84),_("click",function(){g(e);let t=l(2);return d(t.nextCategoriesPage())}),m(45,"lucide-icon",86),r()()()()}if(s&2){let e=l(2);a(8),w("ngModel",e.showActiveCategories),a(),u("ngValue",!0),a(2),u("ngValue",!1),a(7),w("ngModel",e.categorySearchQuery),a(4),u("ngForOf",e.paginatedCategories),a(),u("ngIf",!(e.paginatedCategories!=null&&e.paginatedCategories.length)),a(5),w("ngModel",e.categoriesPerPage),a(12),u("disabled",e.currentCategoriesPage===1),a(3),I(" Page ",e.currentCategoriesPage," of ",e.totalCategoriesPages," "),a(),u("disabled",e.currentCategoriesPage===e.totalCategoriesPages)}}function Pe(s,p){if(s&1){let e=f();i(0,"div",87)(1,"div",88)(2,"div",89)(3,"div",90)(4,"div",91)(5,"span",92),o(6),r(),i(7,"span",93),o(8),r()(),i(9,"div",94),m(10,"lucide-icon",95),i(11,"span"),o(12),r()()(),i(13,"div",91)(14,"div",65)(15,"span",96),o(16,"Status:"),r(),i(17,"button",97),_("click",function(){let t=g(e).$implicit,c=l(3);return d(c.toggleTagActive(t))}),m(18,"lucide-icon",98),r()(),i(19,"div",51)(20,"button",117),_("click",function(){let t=g(e).$implicit,c=l(3);return d(c.editTag(t))}),m(21,"lucide-icon",100),r(),i(22,"button",118),_("click",function(){let t=g(e).$implicit,c=l(3);return d(c.deleteTag(t.uuid))}),m(23,"lucide-icon",102),r()()()(),i(24,"div",103)(25,"div",104),m(26,"lucide-icon",105),i(27,"div",88)(28,"span",32),o(29,"Value"),r(),i(30,"span",66),o(31),r()()(),i(32,"div",104),m(33,"lucide-icon",106),i(34,"div",88)(35,"span",32),o(36,"ID"),r(),i(37,"span",66),o(38),r()()()()()()}if(s&2){let e=p.$implicit;a(6),C(e.name),a(2),v(" ",e.type," "),a(4),v("Slug: ",e.slug,""),a(5),E("bg-green-100",e.isActive)("bg-gray-100",!e.isActive),a(),E("text-green-500",e.isActive)("text-gray-500",!e.isActive),u("name",e.isActive?"check":"x"),a(13),C(e.value||"No value"),a(7),C(e.uuid)}}function ke(s,p){if(s&1){let e=f();i(0,"div",107),m(1,"lucide-icon",119),i(2,"h3",109),o(3),r(),i(4,"p",110),o(5),r(),i(6,"button",111),_("click",function(){g(e);let t=l(3);return d(t.showNewTagDialog=!0)}),m(7,"lucide-icon",70),o(8," Create Tag "),r()()}if(s&2){let e=l(3);a(3),v(" ",e.searchQuery?"No tags found":"No tags yet"," "),a(2),v(" ",e.searchQuery?"Try adjusting your search":"Start by creating your first tag"," ")}}function Fe(s,p){if(s&1){let e=f();i(0,"section",19)(1,"div",62)(2,"h2",63),o(3,"Tags"),r(),i(4,"div",64)(5,"div",65)(6,"label",66),o(7,"Show:"),r(),i(8,"select",67),b("ngModelChange",function(t){g(e);let c=l(2);return y(c.showActiveTags,t)||(c.showActiveTags=t),d(t)}),_("change",function(){g(e);let t=l(2);return d(t.loadData())}),i(9,"option",68),o(10,"Active"),r(),i(11,"option",68),o(12,"Inactive"),r()()(),i(13,"div",65)(14,"label",66),o(15,"Type:"),r(),i(16,"select",67),b("ngModelChange",function(t){g(e);let c=l(2);return y(c.selectedTagType,t)||(c.selectedTagType=t),d(t)}),_("change",function(){g(e);let t=l(2);return d(t.onTagTypeChange(t.selectedTagType))}),i(17,"option",112),o(18,"All"),r(),i(19,"option",113),o(20,"Flower"),r(),i(21,"option",114),o(22,"Plant"),r(),i(23,"option",115),o(24,"Extra"),r()()(),i(25,"button",69),_("click",function(){g(e);let t=l(2);return d(t.showNewTagDialog=!0)}),m(26,"lucide-icon",70),o(27," New Tag "),r()()(),i(28,"div",71)(29,"div",45)(30,"input",116),b("ngModelChange",function(t){g(e);let c=l(2);return y(c.searchQuery,t)||(c.searchQuery=t),d(t)}),_("ngModelChange",function(){g(e);let t=l(2);return d(t.onSearchChange())}),r(),i(31,"div",73),m(32,"lucide-icon",74),r()()(),i(33,"div",75),x(34,Pe,39,14,"div",76)(35,ke,9,2,"div",77),r(),i(36,"div",78)(37,"div",65)(38,"span",79),o(39,"Show"),r(),i(40,"select",67),b("ngModelChange",function(t){g(e);let c=l(2);return y(c.tagsPerPage,t)||(c.tagsPerPage=t),d(t)}),_("change",function(){g(e);let t=l(2);return d(t.onTagsPerPageChange())}),i(41,"option",80),o(42,"4"),r(),i(43,"option",81),o(44,"8"),r(),i(45,"option",82),o(46,"12"),r(),i(47,"option",83),o(48,"16"),r()(),i(49,"span",79),o(50,"per page"),r()(),i(51,"div",65)(52,"button",84),_("click",function(){g(e);let t=l(2);return d(t.prevTagsPage())}),m(53,"lucide-icon",85),r(),i(54,"span",79),o(55),r(),i(56,"button",84),_("click",function(){g(e);let t=l(2);return d(t.nextTagsPage())}),m(57,"lucide-icon",86),r()()()()}if(s&2){let e=l(2);a(8),w("ngModel",e.showActiveTags),a(),u("ngValue",!0),a(2),u("ngValue",!1),a(5),w("ngModel",e.selectedTagType),a(14),w("ngModel",e.searchQuery),a(4),u("ngForOf",e.paginatedTags),a(),u("ngIf",!(e.paginatedTags!=null&&e.paginatedTags.length)),a(5),w("ngModel",e.tagsPerPage),a(12),u("disabled",e.currentTagsPage===1),a(3),I(" Page ",e.currentTagsPage," of ",e.totalTagsPages," "),a(),u("disabled",e.currentTagsPage===e.totalTagsPages)}}function Me(s,p){s&1&&(i(0,"p",136),o(1," Name is required "),r())}function De(s,p){if(s&1&&(i(0,"option",137),o(1),r()),s&2){let e=p.$implicit;u("value",e.uuid),a(),v(" ",e.name," ")}}function Ne(s,p){s&1&&(i(0,"p",136),o(1," Category is required "),r())}function Ae(s,p){if(s&1){let e=f();i(0,"div",120)(1,"div",121)(2,"div",122)(3,"h3",123),o(4),r(),i(5,"button",124),_("click",function(){g(e);let t=l(2);return d(t.showNewTagDialog=!1)}),m(6,"lucide-icon",125),r()(),i(7,"form",126),_("ngSubmit",function(){g(e);let t=l(2);return d(t.onSubmit())}),i(8,"div",88)(9,"label",127),o(10,"Name *"),r(),m(11,"input",128),x(12,Me,2,0,"p",129),r(),i(13,"div",88)(14,"label",127),o(15,"Category *"),r(),i(16,"select",130)(17,"option",131),o(18,"Select a category"),r(),x(19,De,2,2,"option",132),r(),x(20,Ne,2,0,"p",129),r(),i(21,"div",133)(22,"button",134),_("click",function(){g(e);let t=l(2);return d(t.showNewTagDialog=!1)}),o(23," Cancel "),r(),i(24,"button",135),o(25),r()()()()()}if(s&2){let e,n,t,c,h=l(2);a(4),C(h.editingTag?"Edit Tag":"New Tag"),a(3),u("formGroup",h.tagForm),a(4),u("ngClass",S(9,U,((e=h.tagForm.get("name"))==null?null:e.invalid)&&((e=h.tagForm.get("name"))==null?null:e.touched))),a(),u("ngIf",((n=h.tagForm.get("name"))==null?null:n.invalid)&&((n=h.tagForm.get("name"))==null?null:n.touched)),a(4),u("ngClass",S(11,U,((t=h.tagForm.get("categoryUuid"))==null?null:t.invalid)&&((t=h.tagForm.get("categoryUuid"))==null?null:t.touched))),a(3),u("ngForOf",h.categories),a(),u("ngIf",((c=h.tagForm.get("categoryUuid"))==null?null:c.invalid)&&((c=h.tagForm.get("categoryUuid"))==null?null:c.touched)),a(4),u("disabled",h.tagForm.invalid||h.loading),a(),v(" ",h.editingTag?"Update":"Create"," Tag ")}}function Ue(s,p){s&1&&(i(0,"p",136),o(1," Name is required "),r())}function je(s,p){if(s&1){let e=f();i(0,"div",120)(1,"div",121)(2,"div",122)(3,"h3",123),o(4,"New Category"),r(),i(5,"button",124),_("click",function(){g(e);let t=l(2);return d(t.showNewCategoryDialog=!1)}),m(6,"lucide-icon",125),r()(),i(7,"form",126),_("ngSubmit",function(){g(e);let t=l(2);return d(t.onSubmitCategory())}),i(8,"div",88)(9,"label",127),o(10,"Name *"),r(),m(11,"input",138),x(12,Ue,2,0,"p",129),r(),i(13,"div",139)(14,"button",140),_("click",function(){g(e);let t=l(2);return d(t.showNewCategoryDialog=!1)}),o(15," Cancel "),r(),i(16,"button",141),o(17," Create Category "),r()()()()()}if(s&2){let e,n,t=l(2);a(7),u("formGroup",t.categoryForm),a(4),u("ngClass",S(4,U,((e=t.categoryForm.get("name"))==null?null:e.invalid)&&((e=t.categoryForm.get("name"))==null?null:e.touched))),a(),u("ngIf",((n=t.categoryForm.get("name"))==null?null:n.invalid)&&((n=t.categoryForm.get("name"))==null?null:n.touched)),a(4),u("disabled",t.categoryForm.invalid||t.loading)}}function We(s,p){if(s&1){let e=f();i(0,"div",9)(1,"div",10)(2,"div",11)(3,"nav",12)(4,"button",13),_("click",function(){g(e);let t=l();return d(t.activeTab="banners")}),m(5,"lucide-icon",14),o(6," Banners "),r(),i(7,"button",13),_("click",function(){g(e);let t=l();return d(t.activeTab="categories")}),m(8,"lucide-icon",15),o(9," Categories "),r(),i(10,"button",13),_("click",function(){g(e);let t=l();return d(t.activeTab="tags")}),m(11,"lucide-icon",16),o(12," Tags "),r()()()(),x(13,Ee,63,4,"section",17)(14,Be,46,11,"section",17)(15,Fe,58,12,"section",17)(16,Ae,26,13,"div",18)(17,je,18,6,"div",18),r()}if(s&2){let e=l();a(4),B(S(11,A,e.activeTab==="banners"?"border-[#3a5a40] text-[#3a5a40]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),a(3),B(S(13,A,e.activeTab==="categories"?"border-[#3a5a40] text-[#3a5a40]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),a(3),B(S(15,A,e.activeTab==="tags"?"border-[#3a5a40] text-[#3a5a40]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")),a(3),u("ngIf",e.activeTab==="banners"),a(),u("ngIf",e.activeTab==="categories"),a(),u("ngIf",e.activeTab==="tags"),a(),u("ngIf",e.showNewTagDialog),a(),u("ngIf",e.showNewCategoryDialog)}}var et=(()=>{class s{constructor(e,n,t){this.storeConfigService=e,this.messageService=n,this.fb=t,this.storeConfig=null,this.categories=[],this.tags=[],this.loading=!1,this.error=null,this.showNewTagDialog=!1,this.showNewCategoryDialog=!1,this.currentBannerIndex=0,this.currentStoreBannerIndex=0,this.showBannerMenu=!1,this.showStoreBannerMenu=!1,this.editingTag=null,this.selectedTagType="all",this.editingCategory=null,this.searchQuery="",this.filteredTags=[],this.categorySearchQuery="",this.filteredCategories=[],this.activeTab="banners",this.currentCategoriesPage=1,this.categoriesPerPage=4,this.totalCategoriesPages=1,this.paginatedCategories=[],this.currentTagsPage=1,this.tagsPerPage=4,this.totalTagsPages=1,this.paginatedTags=[],this.showActiveCategories=!0,this.showActiveTags=!0,this.tagForm=this.fb.group({name:["",P.required],categoryUuid:["",P.required]}),this.categoryForm=this.fb.group({name:["",P.required]})}ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.error=null,j({storeConfig:this.storeConfigService.getStoreConfig(),categories:this.storeConfigService.getCategories(this.showActiveCategories),tags:this.storeConfigService.getTags(this.selectedTagType==="all"?void 0:this.selectedTagType,this.showActiveTags)}).subscribe({next:({storeConfig:e,categories:n,tags:t})=>{this.storeConfig=e,this.categories=n,this.filteredCategories=n,this.tags=t,this.filteredTags=t,this.loading=!1,this.updateCategoriesPagination(),this.updateTagsPagination()},error:e=>{this.error="Error loading data",this.loading=!1}})}handleBannerUpload(e,n){let t=e.target;t.files&&t.files[0]&&this.storeConfigService.uploadBanner(t.files[0],n).subscribe({next:c=>{this.storeConfig=c},error:c=>{this.error="Error uploading banner",console.error(c)}})}handleBannerDelete(e,n){n&&this.storeConfigService.deleteBanner(e,n).subscribe({next:t=>{this.storeConfig=t,e==="home"?(this.currentBannerIndex=0,this.showBannerMenu=!1):(this.currentStoreBannerIndex=0,this.showStoreBannerMenu=!1)},error:t=>{this.error="Error deleting banner",console.error(t)}})}moveBanner(e,n,t){if(!this.storeConfig)return;let c=e==="home"?this.storeConfig.homeBannerImages:this.storeConfig.storeBannerImages;if(!c||c.length<=1)return;let h=t==="left"?n-1:n+1;h<0||h>=c.length||([c[n],c[h]]=[c[h],c[n]],c.forEach((T,_e)=>{T.order=_e}),this.storeConfigService.updateBannerOrder(e,c).subscribe({next:T=>{this.storeConfig=T,e==="home"?(this.currentBannerIndex=h,this.showBannerMenu=!1):(this.currentStoreBannerIndex=h,this.showStoreBannerMenu=!1)},error:T=>{this.error="Error updating banner order",console.error(T)}}))}onSearchChange(){if(!this.searchQuery.trim()){this.filteredTags=this.tags;return}let e=this.searchQuery.toLowerCase().trim();this.filteredTags=this.tags.filter(n=>n.name.toLowerCase().includes(e)||n.slug.toLowerCase().includes(e)||n.value&&n.value.toLowerCase().includes(e)),this.updateTagsPagination()}onTagTypeChange(e){this.selectedTagType=e,this.loading=!0,this.searchQuery="",this.storeConfigService.getTags(e==="all"?void 0:e,this.showActiveTags).subscribe({next:n=>{this.tags=n,this.filteredTags=n,this.loading=!1,this.updateTagsPagination()},error:n=>{this.error="Error loading tags",this.loading=!1}})}editTag(e){this.editingTag=e,this.tagForm.patchValue({name:e.name,categoryUuid:e.categoryUuid}),this.showNewTagDialog=!0}deleteTag(e){confirm("Are you sure you want to delete this tag?")&&(this.loading=!0,this.storeConfigService.deleteTag(e).subscribe({next:()=>{this.tags=this.tags.filter(n=>n.uuid!==e),this.filteredTags=this.filteredTags.filter(n=>n.uuid!==e),this.messageService.showSuccess("Tag deleted successfully","top right"),this.loading=!1},error:n=>{this.messageService.showError("Error deleting tag","top right"),this.loading=!1}}))}onSubmit(){if(this.tagForm.invalid)return;this.loading=!0;let e={name:this.tagForm.get("name")?.value,categoryUuid:this.tagForm.get("categoryUuid")?.value};this.storeConfigService.createTag(e).subscribe({next:n=>{this.tags.push(n),this.filteredTags=[...this.tags],this.messageService.showSuccess("Tag created successfully","top right"),this.showNewTagDialog=!1,this.tagForm.reset(),this.loading=!1,this.updateTagsPagination()},error:n=>{this.messageService.showError(n.error?.message||"Error creating tag","top right"),this.loading=!1}})}editCategory(e){this.editingCategory=e,this.categoryForm.patchValue({name:e.name,slug:e.slug,value:e.value}),this.showNewCategoryDialog=!0}deleteCategory(e){confirm("Are you sure you want to delete this category?")&&(this.loading=!0,this.storeConfigService.deleteCategory(e).subscribe({next:()=>{this.categories=this.categories.filter(n=>n.uuid!==e),this.filteredCategories=this.filteredCategories.filter(n=>n.uuid!==e),this.messageService.showSuccess("Category deleted successfully","top right"),this.loading=!1},error:n=>{this.messageService.showError("Error deleting category","top right"),this.loading=!1}}))}onSubmitCategory(){if(this.categoryForm.invalid)return;this.loading=!0;let e={name:this.categoryForm.get("name")?.value};this.storeConfigService.createCategory(e).subscribe({next:n=>{this.categories.push(n),this.filteredCategories=[...this.categories],this.messageService.showSuccess("Category created successfully","top right"),this.showNewCategoryDialog=!1,this.categoryForm.reset(),this.loading=!1,this.updateCategoriesPagination()},error:n=>{this.messageService.showError(n.error?.message||"Error creating category","top right"),this.loading=!1}})}toggleBannerMenu(){this.showBannerMenu=!this.showBannerMenu}toggleStoreBannerMenu(){this.showStoreBannerMenu=!this.showStoreBannerMenu}nextBanner(){this.storeConfig?.homeBannerImages&&this.currentBannerIndex<this.storeConfig.homeBannerImages.length-1&&this.currentBannerIndex++}prevBanner(){this.currentBannerIndex>0&&this.currentBannerIndex--}nextStoreBanner(){this.storeConfig?.storeBannerImages&&this.currentStoreBannerIndex<this.storeConfig.storeBannerImages.length-1&&this.currentStoreBannerIndex++}prevStoreBanner(){this.currentStoreBannerIndex>0&&this.currentStoreBannerIndex--}onCategorySearchChange(){if(!this.categorySearchQuery.trim())this.filteredCategories=this.categories;else{let e=this.categorySearchQuery.toLowerCase().trim();this.filteredCategories=this.categories.filter(n=>n.name.toLowerCase().includes(e))}this.updateCategoriesPagination()}toggleTagActive(e){this.loading=!0,this.storeConfigService.updateTag(e.uuid,{isActive:!e.isActive}).subscribe({next:n=>{let t=this.tags.findIndex(c=>c.uuid===e.uuid);t!==-1&&(this.tags[t]=n,this.filteredTags=[...this.tags]),this.messageService.showSuccess("Tag status updated successfully","top right"),this.loading=!1},error:n=>{this.messageService.showError("Error updating tag status","top right"),this.loading=!1}})}toggleCategoryActive(e){this.loading=!0,this.storeConfigService.updateCategory(e.uuid,{isActive:!e.isActive}).subscribe({next:n=>{let t=this.categories.findIndex(c=>c.uuid===e.uuid);t!==-1&&(this.categories[t]=n,this.filteredCategories=[...this.categories]),this.messageService.showSuccess("Category status updated successfully","top right"),this.loading=!1},error:n=>{this.messageService.showError("Error updating category status","top right"),this.loading=!1}})}onCategoriesPerPageChange(){this.currentCategoriesPage=1,this.updateCategoriesPagination()}prevCategoriesPage(){this.currentCategoriesPage>1&&(this.currentCategoriesPage--,this.updateCategoriesPagination())}nextCategoriesPage(){this.currentCategoriesPage<this.totalCategoriesPages&&(this.currentCategoriesPage++,this.updateCategoriesPagination())}updateCategoriesPagination(){let e=(this.currentCategoriesPage-1)*this.categoriesPerPage,n=e+this.categoriesPerPage;this.paginatedCategories=this.filteredCategories.slice(e,n),this.totalCategoriesPages=Math.ceil(this.filteredCategories.length/this.categoriesPerPage)}onTagsPerPageChange(){this.currentTagsPage=1,this.updateTagsPagination()}prevTagsPage(){this.currentTagsPage>1&&(this.currentTagsPage--,this.updateTagsPagination())}nextTagsPage(){this.currentTagsPage<this.totalTagsPages&&(this.currentTagsPage++,this.updateTagsPagination())}updateTagsPagination(){let e=(this.currentTagsPage-1)*this.tagsPerPage,n=e+this.tagsPerPage;this.paginatedTags=this.filteredTags.slice(e,n),this.totalTagsPages=Math.ceil(this.filteredTags.length/this.tagsPerPage)}static{this.\u0275fac=function(n){return new(n||s)(V(ue),V(k),V(oe))}}static{this.\u0275cmp=Q({type:s,selectors:[["app-config"]],standalone:!0,features:[$],decls:6,vars:3,consts:[["homeFileInput",""],["storeFileInput",""],[1,"max-w-7xl","mx-auto","md:mb-20","mb-10"],[1,"text-3xl","mb-6","text-[#3a5a40]","!font-playfair"],["class","text-center p-8 bg-white rounded-lg shadow-sm",4,"ngIf"],["class","grid gap-8",4,"ngIf"],[1,"text-center","p-8","bg-white","rounded-lg","shadow-sm"],[1,"text-gray-600"],[1,"text-red-500"],[1,"grid","gap-8"],[1,"bg-white","p-4","rounded-lg","shadow-sm"],[1,"border-b","border-gray-200"],["aria-label","Tabs",1,"-mb-px","flex","space-x-8"],[3,"click"],["name","image",1,"w-5","h-5"],["name","folder",1,"w-5","h-5"],["name","tags",1,"w-5","h-5"],["class","bg-white p-6 rounded-lg shadow-sm",4,"ngIf"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",4,"ngIf"],[1,"bg-white","p-6","rounded-lg","shadow-sm"],[1,"text-2xl","font-semibold","text-gray-700","mb-6"],[1,"mb-8"],[1,"text-xl","font-medium","text-gray-600","mb-4"],[1,"relative","w-full","h-[400px]","mb-4","rounded-lg","overflow-hidden","bg-gray-100"],[1,"relative","h-full","flex","items-center","justify-center"],["class","absolute inset-0 flex items-center justify-center",4,"ngIf"],["class","relative h-full w-full flex items-center justify-center",4,"ngIf"],[1,"mt-4"],[1,"mb-4","p-4","bg-gray-50","rounded-lg"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"text-sm","text-gray-600","space-y-1"],[1,"font-medium"],[1,"text-xs","text-gray-500"],[1,"text-xs","text-gray-500","list-disc","list-inside","ml-2"],[1,"text-xs","text-gray-500","mt-2"],["type","file","accept","image/*",1,"hidden",3,"change"],["type","button",1,"w-full","px-4","py-2","bg-[#3a5a40]/80","text-white","rounded-[4px]","shadow","hover:bg-[#3a5a40]/90","focus:outline-none","transition","flex","items-center","justify-center","gap-2",3,"click"],["name","image-up",1,"w-5","h-5"],[1,"relative","w-full","h-[200px]","mb-4","rounded-lg","overflow-hidden","bg-gray-100"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-gray-500"],[1,"relative","h-full","w-full","flex","items-center","justify-center"],[1,"relative","w-full","h-full","flex","items-center","justify-center"],[1,"max-w-full","max-h-full","w-auto","h-auto","object-contain",3,"src","alt"],[1,"absolute","top-0","right-0","p-2","bg-black/50"],[1,"relative"],[1,"p-2","text-white","hover:text-amber-300",3,"click"],["name","more-vertical",1,"w-5","h-5"],["class","absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10",4,"ngIf"],[1,"absolute","bottom-0","left-0","right-0","p-4","bg-black/50","flex","justify-between","items-center"],[1,"text-white","text-sm"],[1,"flex","gap-2"],[1,"p-2","text-white","hover:text-amber-300","disabled:opacity-50",3,"click","disabled"],["name","arrow-left",1,"w-5","h-5"],["name","arrow-right",1,"w-5","h-5"],[1,"absolute","right-0","mt-2","w-48","bg-white","rounded-md","shadow-lg","z-10"],[1,"py-1"],[1,"flex","items-center","w-full","px-4","py-2","text-sm","text-red-600","hover:bg-red-50",3,"click"],["name","trash-2",1,"w-4","h-4","mr-2"],[1,"flex","items-center","w-full","px-4","py-2","text-sm","text-gray-700","hover:bg-gray-50",3,"click"],["name","arrow-left",1,"w-4","h-4","mr-2"],["name","arrow-right",1,"w-4","h-4","mr-2"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-semibold","text-gray-700"],[1,"flex","items-center","gap-4"],[1,"flex","items-center","gap-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"p-2","border","rounded-md","focus:outline-none","focus:ring-2","focus:ring-[#3a5a40]/50",3,"ngModelChange","change","ngModel"],[3,"ngValue"],[1,"bg-[#3a5a40]/80","text-white","px-4","py-2","rounded","hover:bg-[#3a5a40]/90","transition-colors","flex","items-center","gap-2",3,"click"],["name","plus",1,"w-5","h-5"],[1,"mb-6"],["type","text","placeholder","Search categories by name, slug, or value...",1,"w-full","p-3","pl-10","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#3a5a40]/50","focus:border-transparent",3,"ngModelChange","ngModel"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["name","search",1,"w-5","h-5","text-gray-400"],[1,"grid","grid-cols-1","gap-4"],["class","group p-6 border border-gray-200 rounded-lg hover:border-[#3a5a40]/50 transition-colors bg-white shadow-sm",4,"ngFor","ngForOf"],["class","col-span-full p-8 text-center bg-gray-50 rounded-lg",4,"ngIf"],[1,"mt-6","flex","items-center","justify-between"],[1,"text-sm","text-gray-700"],["value","4"],["value","8"],["value","12"],["value","16"],[1,"p-2","rounded-md","border","border-gray-300","hover:bg-gray-50","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["name","chevron-left",1,"w-5","h-5"],["name","chevron-right",1,"w-5","h-5"],[1,"group","p-6","border","border-gray-200","rounded-lg","hover:border-[#3a5a40]/50","transition-colors","bg-white","shadow-sm"],[1,"flex","flex-col"],[1,"flex","justify-between","items-start","mb-4"],[1,"flex","flex-col","gap-1"],[1,"flex","items-center","gap-3"],[1,"font-medium","text-xl","text-gray-800"],[1,"text-sm","px-2","py-1","bg-gray-100","rounded-full","text-gray-600"],[1,"flex","items-center","gap-2","text-sm","text-gray-500"],["name","hash",1,"w-4","h-4"],[1,"text-sm","text-gray-500"],["title","Toggle active status",1,"p-2","rounded-full","transition-colors",3,"click"],[1,"w-4","h-4",3,"name"],["title","Edit category",1,"p-2","text-amber-600","hover:text-amber-700","transition-colors","rounded-full","hover:bg-amber-50",3,"click"],["name","pencil",1,"w-5","h-5"],["title","Delete category",1,"p-2","text-red-600","hover:text-red-700","transition-colors","rounded-full","hover:bg-red-50",3,"click"],["name","trash-2",1,"w-5","h-5"],[1,"grid","grid-cols-2","gap-4","mt-4"],[1,"flex","items-center","gap-2","p-3","bg-gray-50","rounded-lg"],["name","tag",1,"w-5","h-5","text-gray-500"],["name","info",1,"w-5","h-5","text-gray-500"],[1,"col-span-full","p-8","text-center","bg-gray-50","rounded-lg"],["name","folder-open",1,"w-12","h-12","mx-auto","text-gray-400","mb-4"],[1,"text-lg","font-medium","text-gray-700","mb-2"],[1,"text-gray-500","mb-4"],[1,"bg-[#3a5a40]/80","text-white","px-4","py-2","rounded","hover:bg-[#3a5a40]/90","transition-colors","flex","items-center","gap-2","mx-auto",3,"click"],["value","all"],["value","flower"],["value","plant"],["value","extra"],["type","text","placeholder","Search tags by name, slug, or value...",1,"w-full","p-3","pl-10","border","border-gray-300","rounded-lg","focus:outline-none","focus:ring-2","focus:ring-[#3a5a40]/50","focus:border-transparent",3,"ngModelChange","ngModel"],["title","Edit tag",1,"p-2","text-amber-600","hover:text-amber-700","transition-colors","rounded-full","hover:bg-amber-50",3,"click"],["title","Delete tag",1,"p-2","text-red-600","hover:text-red-700","transition-colors","rounded-full","hover:bg-red-50",3,"click"],["name","tags",1,"w-12","h-12","mx-auto","text-gray-400","mb-4"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center"],[1,"bg-white","p-6","rounded-lg","shadow-lg","w-full","max-w-md"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-xl","font-semibold","text-gray-700"],[1,"text-gray-500","hover:text-gray-700",3,"click"],["name","x",1,"w-5","h-5"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","text","formControlName","name","placeholder","Tag name",1,"w-full","p-2","border","rounded","transition-colors",3,"ngClass"],["class","text-red-500 text-sm mt-1",4,"ngIf"],["formControlName","categoryUuid",1,"w-full","p-2","border","rounded","transition-colors",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"flex","justify-end","gap-3","mt-6"],["type","button",1,"px-4","py-2","text-gray-700","bg-gray-100","rounded","hover:bg-gray-200","transition-colors",3,"click"],["type","submit",1,"px-4","py-2","text-white","bg-[#3a5a40]/80","rounded","hover:bg-[#3a5a40]/90","transition-colors","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"text-red-500","text-sm","mt-1"],[3,"value"],["type","text","formControlName","name","placeholder","Category name",1,"w-full","p-2","border","rounded","transition-colors",3,"ngClass"],[1,"flex","justify-end","gap-2","mt-4"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded","hover:bg-gray-50","transition-colors",3,"click"],["type","submit",1,"bg-[#3a5a40]/80","text-white","px-4","py-2","rounded","hover:bg-[#3a5a40]/90","transition-colors","disabled:opacity-50",3,"disabled"]],template:function(n,t){n&1&&(i(0,"div",2)(1,"h1",3),o(2," Store Configuration "),r(),x(3,xe,3,0,"div",4)(4,ve,3,1,"div",4)(5,We,18,17,"div",5),r()),n&2&&(a(3),u("ngIf",t.loading),a(),u("ngIf",t.error),a(),u("ngIf",!t.loading&&!t.error))},dependencies:[R,O,G,q,de,ge,le,H,se,Z,ne,re,J,ie,K,X,ee,te,ae,Y,ce],encapsulation:2})}}return s})();export{et as ConfigComponent};
