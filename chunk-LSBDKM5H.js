import{a as oe,b as se,c as ge}from"./chunk-REQGW25J.js";import{a as re,b as ae,c as le}from"./chunk-RAAZGNEA.js";import{a as de}from"./chunk-WWEGQYUO.js";import{a as pe}from"./chunk-MKE27YKD.js";import{a as ue}from"./chunk-WTS7XT4D.js";import{a as me}from"./chunk-YVLEHWOY.js";import{a as ce}from"./chunk-BFSNZW6T.js";import{a as V}from"./chunk-TPLJ4PUN.js";import{l as ie}from"./chunk-EWYMWOI3.js";import{a as k}from"./chunk-HYGMGYDW.js";import{J as te,K as ne,L as F,b as q,c as v,d as W,e as J,h as Y,l as $,la as A,m as K,r as Q,t as X,u as E,w as T}from"./chunk-GX2JBJOU.js";import{e as U,f as G,j as O}from"./chunk-LKSAQKNU.js";import{Ma as Z,Na as ee}from"./chunk-2PA5JSTX.js";import{k as B,t as N,u as S}from"./chunk-OE5DTYP4.js";import{Ac as y,Bc as M,Dc as D,Eb as w,Fc as z,Ia as f,Ic as H,Ja as _,Kb as x,Mb as g,Rb as m,Ta as j,Wb as o,Xb as r,Yb as h,ac as C,fc as p,hc as d,ob as I,rb as l,rc as a,sb as u,sc as L,tc as R,xa as P}from"./chunk-W7KOHNRA.js";function we(i,s){if(i&1){let e=C();o(0,"app-login",15),p("setViewType",function(t){f(e);let c=d();return _(c.setViewType(t))}),r()}}function ve(i,s){if(i&1){let e=C();o(0,"app-checkout",15),p("setViewType",function(t){f(e);let c=d();return _(c.setViewType(t))}),r()}}function be(i,s){if(i&1){let e=C();o(0,"app-register",15),p("setViewType",function(t){f(e);let c=d();return _(c.setViewType(t))}),r()}}function Pe(i,s){i&1&&(o(0,"span",21),a(1,"Email inv\xE1lido"),r())}function ye(i,s){i&1&&a(0," Enviando... ")}function Me(i,s){i&1&&a(0," Enviar instrucciones ")}function Se(i,s){if(i&1){let e=C();o(0,"div",14)(1,"h1",16),a(2," Recuperar Contrase\xF1a "),r(),o(3,"form",17),p("ngSubmit",function(){f(e);let t=d();return _(t.onSubmitForgotPassword())}),o(4,"div",18)(5,"label",19),a(6,"Email"),r(),h(7,"input",20),x(8,Pe,2,0,"span",21),r(),o(9,"div",22)(10,"button",23)(11,"span",24),x(12,ye,1,0)(13,Me,1,0),r()()()(),o(14,"div",25)(15,"p",26),a(16," \xBFRecordaste tu contrase\xF1a? "),h(17,"br"),o(18,"span",27),p("click",function(){f(e);let t=d();return _(t.setViewType("login"))}),a(19,"Volver al inicio de sesi\xF3n."),r()()()()}if(i&2){let e,n=d();l(3),g("formGroup",n.forgotPasswordForm),l(5),m(8,(e=n.forgotPasswordForm.get("email"))!=null&&e.invalid&&((e=n.forgotPasswordForm.get("email"))!=null&&e.touched)?8:-1),l(2),g("disabled",!n.forgotPasswordForm.valid||n.loading),l(2),m(12,n.loading?12:13)}}function Oe(i,s){i&1&&(o(0,"span",21),a(1,"La contrase\xF1a debe tener al menos 6 caracteres"),r())}function ke(i,s){i&1&&(o(0,"span",21),a(1,"Las contrase\xF1as no coinciden"),r())}function Ee(i,s){i&1&&a(0," Actualizando... ")}function Te(i,s){i&1&&a(0," Actualizar Contrase\xF1a ")}function Fe(i,s){if(i&1){let e=C();o(0,"div",14)(1,"h1",16),a(2," Restablecer Contrase\xF1a "),r(),o(3,"form",17),p("ngSubmit",function(){f(e);let t=d();return _(t.onSubmitResetPassword())}),o(4,"div",18)(5,"label",28),a(6,"Nueva Contrase\xF1a"),r(),h(7,"input",29),x(8,Oe,2,0,"span",21),r(),o(9,"div",18)(10,"label",30),a(11,"Confirmar Contrase\xF1a"),r(),h(12,"input",31),x(13,ke,2,0,"span",21),r(),o(14,"div",22)(15,"button",23)(16,"span",24),x(17,Ee,1,0)(18,Te,1,0),r()()()(),o(19,"div",25)(20,"p",26),a(21," \xBFRecordaste tu contrase\xF1a? "),h(22,"br"),o(23,"span",27),p("click",function(){f(e);let t=d();return _(t.setViewType("login"))}),a(24,"Volver al inicio de sesi\xF3n."),r()()()()}if(i&2){let e,n,t=d();l(3),g("formGroup",t.resetPasswordForm),l(5),m(8,(e=t.resetPasswordForm.get("password"))!=null&&e.invalid&&((e=t.resetPasswordForm.get("password"))!=null&&e.touched)?8:-1),l(5),m(13,t.resetPasswordForm.hasError("mismatch")&&((n=t.resetPasswordForm.get("confirmPassword"))!=null&&n.touched)?13:-1),l(2),g("disabled",!t.resetPasswordForm.valid||t.loading),l(2),m(17,t.loading?17:18)}}var fe=(()=>{class i{constructor(e,n,t,c,b,_e){this.dialogRef=e,this._dialog=n,this.data=t,this.messageService=c,this.authService=b,this.fb=_e,this.view_type=w("login"),this.loading=!1,this.viewTypeChange=new j,this.forgotPasswordForm=this.fb.group({email:["",[v.required,v.email]]}),this.resetPasswordForm=this.fb.group({password:["",[v.required,v.minLength(6)]],confirmPassword:["",[v.required]]},{validator:this.passwordMatchValidator})}passwordMatchValidator(e){let n=e.get("password")?.value,t=e.get("confirmPassword")?.value;return n===t?null:{mismatch:!0}}getTokenFromUrl(){return new URLSearchParams(window.location.search).get("token")}setViewType(e){return this.view_type.set(e)}onSubmitForgotPassword(){if(this.forgotPasswordForm.valid){this.loading=!0;let e=this.forgotPasswordForm.get("email")?.value;this.authService.forgotPassword(e).subscribe({next:()=>{this.messageService.showInfo("Se ha enviado un correo con las instrucciones para recuperar tu contrase\xF1a","top right"),this.viewTypeChange.emit("login"),this.loading=!1},error:n=>{this.messageService.showError("Error al enviar el correo de recuperaci\xF3n","top right"),this.loading=!1}})}}onSubmitResetPassword(){if(this.resetPasswordForm.valid){this.loading=!0;let{password:e,confirmPassword:n}=this.resetPasswordForm.value;if(e!==n){this.messageService.showError("Las contrase\xF1as no coinciden","top right"),this.loading=!1;return}let t=this.getTokenFromUrl();if(!t){this.messageService.showError("Token no v\xE1lido","top right"),this.loading=!1;return}this.authService.resetPassword(t,e).subscribe({next:()=>{this.messageService.showInfo("Tu contrase\xF1a ha sido actualizada correctamente","top right"),this.viewTypeChange.emit("login"),this.loading=!1},error:c=>{this.messageService.showError("Error al actualizar la contrase\xF1a","top right"),this.loading=!1}})}}static{this.\u0275fac=function(n){return new(n||i)(u(te),u(F),u(ne),u(V),u(me),u(Q))}}static{this.\u0275cmp=P({type:i,selectors:[["app-auth"]],outputs:{viewTypeChange:"viewTypeChange"},standalone:!0,features:[y],decls:27,vars:6,consts:[[1,"login-container"],[1,"login","flex","flex-col","md:flex-row","justify-center","items-center","md:min-w-[744px]","md:h-[85%]"],[1,"hidden","lg:block","left","md:flex","flex-col","justify-center","items-center","bg-primary/50","backdrop-blur-md","rounded-[4px]","md:px-6","py-4"],[1,"flex","items-center","gap-2","mb-4"],["name","leaf",1,"w-8","h-8","text-white"],[1,"text-2xl","font-bold","text-white","!m-0"],[1,"!font-playfair"],[1,"flex","items-center","gap-2","my-2"],[1,"text-base","text-white/80","text-center"],[1,"w-full","flex","flex-col","items-start","justify-start"],[1,"text-lg","font-semibold","text-white","mb-3"],[1,"text-white","space-y-1"],[1,"flex","items-center","gap-2","before:content-['\u2022']","before:text-white"],[1,"w-[350px]","h-full","min-h-[452px]","z-20"],[1,"w-[350px]","h-full","min-h-[452px]","z-20","bg-primary","rounded-[4px]","px-8","py-4"],[1,"w-[350px]","h-full","min-h-[452px]","z-20",3,"setViewType"],[1,"title","!text-xl","!font-playfair","!mb-[24px]","text-white"],[1,"w-full",3,"ngSubmit","formGroup"],[1,"flex-1","w-full","mb-2"],["for","email",1,"block","text-sm","font-medium","text-white/80"],["id","email","formControlName","email","type","email","placeholder","Email",1,"mt-1","p-2","w-full","border","border-gray-300","rounded-[4px]","focus:outline-none","focus:ring-2","focus:ring-[#A2E100]/20"],[1,"text-red-500","text-sm"],[1,"flex","flex-col","gap-2","w-full"],["type","submit",1,"px-4","py-2","bg-[#3a5a40]/80","text-white","rounded-[4px]","shadow","hover:bg-[#A2E100]/20","focus:outline-none","transition","disabled:opacity-50",3,"disabled"],[1,"tracking-widest"],[1,"w-full","flex","items-center","justify-center","mt-8"],[1,"text-sm","text-white","mt-4","cursor-pointer","w-full","text-start"],[1,"hover:text-[#A2E100]/50","text-sm",3,"click"],["for","password",1,"block","text-sm","font-medium","text-white/80"],["id","password","formControlName","password","type","password","placeholder","Nueva contrase\xF1a",1,"mt-1","p-2","w-full","border","border-gray-300","rounded-[4px]","focus:outline-none","focus:ring-2","focus:ring-[#A2E100]/20"],["for","confirmPassword",1,"block","text-sm","font-medium","text-white/80"],["id","confirmPassword","formControlName","confirmPassword","type","password","placeholder","Confirmar contrase\xF1a",1,"mt-1","p-2","w-full","border","border-gray-300","rounded-[4px]","focus:outline-none","focus:ring-2","focus:ring-[#A2E100]/20"]],template:function(n,t){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(4,"lucide-icon",4),o(5,"h2",5),a(6," Bienvenido a "),o(7,"span",6),a(8," Los Jazmines "),r()()(),o(9,"div",7)(10,"p",8),a(11," Descubre la magia de nuestras flores frescas seleccionadas diariamente para crear momentos inolvidables. "),r()(),o(12,"div",9)(13,"h2",10),a(14," Beneficios de tu cuenta: "),r(),o(15,"ul",11)(16,"li",12),a(17," Seguimiento de pedidos "),r(),o(18,"li",12),a(19," Descuentos exclusivos "),r(),o(20,"li",12),a(21," Recordatorios de fechas especiales "),r()()()(),x(22,we,1,0,"app-login",13)(23,ve,1,0,"app-checkout",13)(24,be,1,0,"app-register",13)(25,Se,20,4,"div",14)(26,Fe,25,5,"div",14),r()()),n&2&&(g("@slideInLeft",void 0),l(22),m(22,t.view_type()==="login"?22:-1),l(),m(23,t.view_type()==="checkout"?23:-1),l(),m(24,t.view_type()==="register"?24:-1),l(),m(25,t.view_type()==="forgot-password"?25:-1),l(),m(26,t.view_type()==="reset-password"?26:-1))},dependencies:[S,O,A,X,Y,q,W,J,$,K,T,E,de,pe,ue],styles:[".login-container[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:60%;height:85%;transform:translate(25px);z-index:1}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{z-index:2;width:60%;height:100%;flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;box-shadow:6px 6px 30px #00000040}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2rem;color:#fff;margin-bottom:2rem}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.5rem}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{width:80%;color:#fff;margin:0}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{color:#fff}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.5rem}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-buttons[_ngcontent-%COMP%]{width:70%;display:flex;justify-content:space-between;align-items:center;gap:1.5rem}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-buttons[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{border-radius:12px}.login-container[_ngcontent-%COMP%]   .login[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .login-buttons[_ngcontent-%COMP%]   .login-button--register[_ngcontent-%COMP%]{background-color:transparent;color:#fff}.login-button--change-password[_ngcontent-%COMP%]{color:#fff;font-size:.8rem;padding:.5rem;margin-bottom:1rem}  .mat-mdc-form-field-subscript-wrapper, .mat-mdc-form-field-bottom-align[_ngcontent-%COMP%]:before{display:none!important}"],data:{animation:[k]}})}}return i})();var Ae=(i,s)=>({"fixed bg-white/80 backdrop-blur-md shadow-md":i,"bg-transparent  shadow-none":s}),Ve=()=>["/home"],Le=()=>["/online-store"],je=()=>["/card-order"];function Ie(i,s){if(i&1){let e=C();o(0,"div")(1,"button",15),p("click",function(){f(e);let t=d();return _(t.openDialogLogin())}),o(2,"span",16),a(3," Ingresar"),r()()()}}function Re(i,s){if(i&1){let e=C();o(0,"div",17),p("click",function(){f(e);let t=d();return _(t.openRightDrawer())}),o(1,"div",18)(2,"span",19),a(3),r(),o(4,"div",20)(5,"span"),a(6),z(7,"slice"),r()()()()}if(i&2){let e,n,t=d();l(3),L((e=t.currentUser())==null?null:e.username),l(3),L(H(7,2,(n=t.currentUser())==null?null:n.username,0,1))}}var bt=(()=>{class i{constructor(e,n,t,c){this._tokenService=e,this._messageService=n,this.dialog=t,this.store=c,this.currentUser=w(""),this.shoppingCart=w(null),this.shoppingCartLength=w(null),this.scrolled=!1}ngOnInit(){this.getUser(),this.getShoppingCart()}onWindowScroll(){this.scrolled=window.scrollY>0}ngOnDestroy(){this._unsuscribeAll.unsubscribe()}getUser(){this._unsuscribeAll=this.store.select(re).subscribe(e=>{e&&(this.currentUser.set(e),console.log({currentUser:e}),this.isAdmin$=this.store.select(le))})}getShoppingCart(){this._unsuscribeAll=this.store.select(ae).subscribe(e=>{e&&this.shoppingCartLength.set(e.length)})}openLeftDrawer(){this.store.dispatch(oe({isOpen:!0}))}openRightDrawer(){this.store.dispatch(se({isOpen:!0}))}openDialogLogin(){this.dialog.open(fe,{width:"250px",data:{name:"hola",animal:"hola"}}).closed.subscribe(n=>{console.log("The dialog was closed")})}static{this.\u0275fac=function(n){return new(n||i)(u(ce),u(V),u(F),u(ie))}}static{this.\u0275cmp=P({type:i,selectors:[["app-header"]],hostBindings:function(n,t){n&1&&p("scroll",function(){return t.onWindowScroll()},!1,I)},standalone:!0,features:[y],decls:22,vars:14,consts:[[1,"top-0","left-0","w-full","transition-all","duration-0","ease-in-out","z-50","text-[#3a5a40]","to-black","toolbar","backdrop-blur-md",3,"ngClass"],[1,"content","mx-4","xl:m-0"],[1,"logo-container"],[1,"flex","lg:hidden","justify-end"],["mat-icon-button","","aria-label","menu",1,"text-white",3,"click"],["name","align-left"],[1,"hidden","lg:flex","justify-start","items-center"],[1,"link-container"],[1,""],["routerLinkActive","router-link-active","mat-flat-button","",1,"btn-header",3,"routerLink"],[1,"right-container"],["mat-icon-button","","routerLinkActive","router-link-active",1,"relative","text-black","custom-badge",3,"routerLink"],[1,"absolute","-top-[-10px]","right-[23px]","transform","translate-x-1/2","-translate-y-1/2","text-black","text-xs","font-semibold","px-2","py-0.5","rounded-full"],["name","shopping-cart",3,"size"],[1,"cursor-pointer","group"],[1,"px-4","py-2","bg-[#3a5a40]/80","text-white","rounded-[4px]","shadow","hover:bg-[#3a5a40]/80","focus:outline-none","transition",3,"click"],[1,"tracking-widest"],[1,"cursor-pointer","group",3,"click"],[1,"flex","items-center","gap-2","rounded-lg","transition-all","duration-300"],[1,"text-lg","font-medium","group-hover:shadow-text"],[1,"w-10","h-10","bg-[#3a5a40]/80","rounded-full","flex","items-center","justify-center","text-white","font-bold","group-hover:shadow-lg","hover:bg-opacity-100"]],template:function(n,t){if(n&1&&(o(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),p("click",function(){return t.openLeftDrawer()}),h(5,"lucide-icon",5),r()(),h(6,"app-logo"),o(7,"div",6)(8,"div",7)(9,"div",8)(10,"button",9),a(11," Inicio "),r()(),o(12,"div",8)(13,"button",9),a(14," Tienda "),r()()()()(),o(15,"div",10)(16,"button",11)(17,"span",12),a(18),r(),h(19,"lucide-icon",13),r(),x(20,Ie,4,0,"div")(21,Re,8,6,"div",14),r()()()),n&2){let c,b;g("ngClass",D(8,Ae,t.scrolled,!t.scrolled)),l(10),g("routerLink",M(11,Ve)),l(3),g("routerLink",M(12,Le)),l(3),g("routerLink",M(13,je)),l(2),R(" ",t.shoppingCartLength()," "),l(),g("size",24),l(),m(20,(c=t.currentUser())!=null&&c.username?-1:20),l(),m(21,(b=t.currentUser())!=null&&b.username?21:-1)}},dependencies:[O,U,G,A,Z,ee,T,E,S,B,N,ge],styles:[".toolbar[_ngcontent-%COMP%]{width:100%;height:60px;display:flex;justify-content:center;align-items:center}.toolbar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;max-width:1200px;height:100%;display:flex;justify-content:space-between;align-items:center;padding:1rem 0}.logo-container[_ngcontent-%COMP%]{width:20%;display:flex;justify-content:flex-start;align-items:center;text-align:center}.logo-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.link-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:1rem}.link-container[_ngcontent-%COMP%]   .btn-header[_ngcontent-%COMP%]{background-color:transparent}.right-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:1rem}.right-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#33691e}.right-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   .btn-login[_ngcontent-%COMP%]{color:#fff;background-color:#33691e}"],data:{animation:[k]}})}}return i})();export{bt as a};
