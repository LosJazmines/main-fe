import './polyfills.server.mjs';
import{a as ae}from"./chunk-5N5AT2PO.mjs";import"./chunk-H7YUPPG3.mjs";import{a as ne}from"./chunk-WOH52GB3.mjs";import{a as oe}from"./chunk-L3H3J3KU.mjs";import{a as re}from"./chunk-UYWXFIFU.mjs";import{l as ie}from"./chunk-TTTSTSGJ.mjs";import{B as Y,Q as Z,b as U,c as d,d as R,e as H,f as V,h as q,i as A,ia as ee,k as G,l as O,la as te,m as B,r as z,s as $,t as J,u as K,v as Q,x as W,z as X}from"./chunk-5ITMT7SL.mjs";import{ga as k,la as L,ma as D}from"./chunk-3M2R4VPM.mjs";import"./chunk-5TOM3SNX.mjs";import{n as T,o as N,w as j}from"./chunk-DR63K3YT.mjs";import{Da as C,Ea as I,Hb as u,Jb as l,Tb as t,Ub as e,Vb as p,Zb as F,cc as g,ec as x,ib as y,ic as P,la as h,ob as m,oc as o,pb as f,pc as M,sa as E,xc as w}from"./chunk-XTO3CEGG.mjs";import"./chunk-VVCT4QZE.mjs";function me(i,c){i&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}function le(i,c){if(i&1&&(t(0,"mat-option",21),o(1),e()),i&2){let r=c.$implicit;l("value",r),m(),M(r)}}function de(i,c){i&1&&(t(0,"mat-error"),o(1,"Selecciona una categor\xEDa"),e())}function ce(i,c){i&1&&(t(0,"mat-error"),o(1,"Introduce un precio v\xE1lido"),e())}function se(i,c){i&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}function ue(i,c){i&1&&(t(0,"mat-error"),o(1,"Este campo es obligatorio"),e())}function pe(i,c){i&1&&(t(0,"mat-error",22),o(1,"Introduce una URL v\xE1lida"),e())}function fe(i,c){if(i&1){let r=F();t(0,"div",23),p(1,"img",24),t(2,"button",25),g("click",function(){let n=C(r).index,s=x();return I(s.removeImage(n))}),t(3,"mat-icon"),o(4,"close"),e()()()}if(i&2){let r=c.$implicit,a=c.index;m(),P("alt","Imagen ",a+1,""),l("src",r,y)}}var De=(()=>{class i{constructor(r,a,n,s,_){this._fb=r,this._productsService=a,this.store=n,this._tokenService=s,this._messageService=_,this._adminHeaderStore=h(ae),this.adminHeaderStore$=this._adminHeaderStore.getHeaderTitle(),this.imageList=[],this.isUrlInvalid=!1,this.categories=["Flores","Ramos y Bouquets","Plantas","Macetas","Fertilizantes","Herramientas","Decoraci\xF3n","Chocolates","Peluches","Cajas de Regalo","Eventos y Festividades","Bautismo","Nacimiento","Novia","Funerales","Centros de Mesa","Tarjetas Personalizadas","Regalos Personalizados","Rosas Eternas","Ambientadores"]}ngOnInit(){this._adminHeaderStore.updateHeaderTitle("Products - Product"),this.initGroupLogin()}initGroupLogin(){this.imageUrl=new V(""),this.productForm=this._fb.group({name:["",[d.required,d.minLength(3)]],category:["",d.required],price:[null,[d.required,d.min(0)]],stock:[null,[d.required,d.min(0)]],description:["",[d.required,d.minLength(10)]],images:[this.imageList,[d.required]]})}onSubmit(){let r=this.productForm.value;this._productsService.createProduct(r).subscribe({next:a=>{console.log({response:a})},error:a=>{console.error("Error al Ingresar usuario:",a)}})}addImage(){console.log("A\xF1adir imagen");let r=this.imageUrl.value;if(r){this.imageList.push(r);return}}removeImage(r){this.imageList.splice(r,1)}isValidUrl(r){try{return new URL(r),!0}catch{return!1}}onCancel(){this.productForm.reset()}static{this.\u0275fac=function(a){return new(a||i)(f(z),f(ne),f(ie),f(re),f(oe))}}static{this.\u0275cmp=E({type:i,selectors:[["app-product"]],standalone:!0,features:[w],decls:47,vars:10,consts:[[1,"p-6","bg-gray-100","min-h-full"],[1,"text-2xl","font-semibold","text-gray-700","mb-6"],[1,"bg-white","shadow","rounded-lg","p-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"w-full"],["matInput","","formControlName","name","placeholder","Ej: Rosa Roja"],[4,"ngIf"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","formControlName","price","placeholder","Ej: 25.00"],["matInput","","type","number","formControlName","stock","placeholder","Ej: 10"],[1,"w-full","md:col-span-2"],["matInput","","formControlName","description","placeholder","Descripci\xF3n del producto"],["matInput","","placeholder","https://example.com/imagen.jpg",1,"w-full",3,"formControl"],["mat-icon-button","","aria-label","Agregar imagen","type","button",1,"ml-2",3,"click"],["class","text-red-500 text-sm",4,"ngIf"],[1,"mt-4","flex","flex-wrap","gap-4"],["class","relative",4,"ngFor","ngForOf"],[1,"mt-6","flex","justify-end","gap-4"],["mat-button","","color","warn","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit"],[3,"value"],[1,"text-red-500","text-sm"],[1,"relative"],[1,"w-24","h-24","object-cover","rounded-md","shadow-lg",3,"src","alt"],["mat-icon-button","","color","warn","type","button","aria-label","Eliminar imagen",1,"absolute","top-0","right-0","m-1","p-1","bg-white","rounded-full","shadow-md",3,"click"]],template:function(a,n){if(a&1&&(t(0,"div",0)(1,"h1",1),o(2,"Agregar Producto"),e(),t(3,"form",2),g("ngSubmit",function(){return n.onSubmit()}),t(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),o(7,"Nombre del Producto"),e(),p(8,"input",5),u(9,me,2,0,"mat-error",6),e(),t(10,"mat-form-field",4)(11,"mat-label"),o(12,"Categor\xEDa"),e(),t(13,"mat-select",7),u(14,le,2,2,"mat-option",8),e(),u(15,de,2,0,"mat-error",6),e(),t(16,"mat-form-field",4)(17,"mat-label"),o(18,"Precio"),e(),p(19,"input",9),u(20,ce,2,0,"mat-error",6),e(),t(21,"mat-form-field",4)(22,"mat-label"),o(23,"Cantidad en Stock"),e(),p(24,"input",10),u(25,se,2,0,"mat-error",6),e(),t(26,"mat-form-field",11)(27,"mat-label"),o(28,"Descripci\xF3n"),e(),p(29,"textarea",12),u(30,ue,2,0,"mat-error",6),e(),t(31,"div",11)(32,"mat-form-field",4)(33,"mat-label"),o(34,"URL de la Imagen Principal"),e(),p(35,"input",13),t(36,"button",14),g("click",function(){return n.addImage()}),t(37,"mat-icon"),o(38,"add"),e()(),u(39,pe,2,0,"mat-error",15),e()(),t(40,"div",16),u(41,fe,5,3,"div",17),e()(),t(42,"div",18)(43,"button",19),g("click",function(){return n.onCancel()}),o(44," Cancelar "),e(),t(45,"button",20),o(46," Guardar Producto "),e()()()()),a&2){let s,_,v,b,S;m(3),l("formGroup",n.productForm),m(6),l("ngIf",(s=n.productForm.get("name"))==null?null:s.invalid),m(5),l("ngForOf",n.categories),m(),l("ngIf",(_=n.productForm.get("category"))==null?null:_.invalid),m(5),l("ngIf",(v=n.productForm.get("price"))==null?null:v.invalid),m(5),l("ngIf",(b=n.productForm.get("stock"))==null?null:b.invalid),m(5),l("ngIf",(S=n.productForm.get("description"))==null?null:S.invalid),m(5),l("formControl",n.imageUrl),m(4),l("ngIf",n.isUrlInvalid),m(2),l("ngForOf",n.imageList)}},dependencies:[j,T,N,ee,L,D,W,K,Q,Y,Z,k,X,te,$,q,U,A,R,H,J,G,O,B]})}}return i})();export{De as default};
