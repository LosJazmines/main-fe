<!-- <div class="p-6 bg-gray-100 min-h-full">
  <h1 class="text-2xl font-semibold text-gray-700 mb-6">Gestión de Usuarios</h1>

  <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
    <div class="bg-white p-4 rounded-lg shadow flex items-center gap-4">
      <div class="text-blue-500">
        <mat-icon class="text-4xl">person</mat-icon>
      </div>
      <div>
        <p class="text-lg font-semibold">Usuarios Activos</p>
        <p class="text-gray-500">{{ activeUsers }}</p>
      </div>
    </div>

    <div class="bg-white p-4 rounded-lg shadow flex items-center gap-4">
      <div class="text-green-500">
        <mat-icon class="text-4xl">person_add</mat-icon>
      </div>
      <div>
        <p class="text-lg font-semibold">Nuevos Usuarios</p>
        <p class="text-gray-500">{{ newUsers }}</p>
      </div>
    </div>

    <div class="bg-white p-4 rounded-lg shadow flex items-center gap-4">
      <div class="text-red-500">
        <mat-icon class="text-4xl">person_off</mat-icon>
      </div>
      <div>
        <p class="text-lg font-semibold">Usuarios Inactivos</p>
        <p class="text-gray-500">{{ inactiveUsers }}</p>
      </div>
    </div>

    <div class="bg-white p-4 rounded-lg shadow flex items-center gap-4">
      <div class="text-purple-500">
        <mat-icon class="text-4xl">groups</mat-icon>
      </div>
      <div>
        <p class="text-lg font-semibold">Total Usuarios</p>
        <p class="text-gray-500">{{ totalUsers }}</p>
      </div>
    </div>
  </div>

  <div class="bg-white p-6 rounded-lg shadow">
    <div class="flex justify-between items-center mb-4">
      <div class="flex gap-4">
        <mat-form-field>
          <mat-label>Estado</mat-label>
          <mat-select
            [(value)]="selectedStatus"
            (selectionChange)="applyFilters()"
          >
            <mat-option *ngFor="let status of statuses" [value]="status">{{
              status
            }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="w-64">
          <mat-label>Buscar Usuario</mat-label>
          <input
            matInput
            placeholder="Nombre, correo..."
            [(ngModel)]="searchQuery"
            (input)="applyFilters()"
          />
        </mat-form-field>
      </div>

      <button mat-raised-button color="primary" (click)="addUser()">
        <mat-icon>person_add</mat-icon>
        Agregar Usuario
      </button>
    </div>

    <table class="min-w-full text-left">
      <thead>
        <tr class="border-b bg-gray-50">
          <th class="px-4 py-2">Nombre</th>
          <th class="px-4 py-2">Correo</th>
          <th class="px-4 py-2">Estado</th>
          <th class="px-4 py-2">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="let user of filteredUsers"
          class="border-b hover:bg-gray-50"
        >
          <td class="px-4 py-2">{{ user.name }}</td>
          <td class="px-4 py-2">{{ user.email }}</td>
          <td class="px-4 py-2">
            <span
              [ngClass]="{
                'text-green-500': user.status === 'Activo',
                'text-red-500': user.status === 'Inactivo'
              }"
            >
              {{ user.status }}
            </span>
          </td>
          <td class="px-4 py-2">
            <button mat-button color="warn" (click)="removeUser(user)">
              Eliminar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div> -->

<div class="h-full inset-0 flex flex-col min-w-0 overflow-hidden">
  <mat-drawer-container
    class="flex-auto h-full bg-card dark:bg-transparent"
    (backdropClick)="onBackdropClicked()"
  >
    <!-- Drawer (Detalle del Usuario) -->
    <mat-drawer
      #drawer
      class="w-full md:w-160 dark:bg-gray-900"
      [mode]="drawerMode"
      [opened]="isDrawerOpen"
      [position]="'end'"
      [disableClose]="true"
    >
      <!-- Componente de detalle del usuario -->
      <app-user-detail
        [contact]="selectedUser"
        (close)="closeDrawer()"
      ></app-user-detail>
    </mat-drawer>

    <!-- Contenido Principal -->
    <mat-drawer-content class="flex flex-col">
      <!-- Header / Filtros (puedes dejar el que ya tienes) -->
      <div
        class="flex flex-col lg:flex-row justify-between items-center mb-4 gap-4 px-4"
      >
        <h1
          class="text-3xl mb-6 text-[#3a5a40] !font-playfair text-start w-full"
        >
          Usuarios
        </h1>
        <div class="w-full flex flex-col lg:flex-row items-center gap-4">
          <app-search-moderno-reactive
            [inputPlaceholder]="
              'Buscar por Dirección o Nombre del destinatario'
            "
            (search)="handleSearch($event)"
            class="w-full lg:w-[400px]"
          >
          </app-search-moderno-reactive>
          <button
            (click)="openDialogAddProduct()"
            class="w-full lg:w-max px-4 py-2 bg-[#3a5a40]/80 text-white rounded-[4px] shadow hover:bg-[#3a5a40]/80 focus:outline-none transition flex items-center gap-2"
          >
            <lucide-icon name="plus" class="w-5 h-5"></lucide-icon>
            Agregar Usuario
          </button>
        </div>
      </div>

      <!-- Lista de Usuarios -->
      <div class="px-4">
        <table class="min-w-full text-left">
          <thead>
            <tr class="border-b bg-gray-50">
              <th class="px-4 py-2">Nombre</th>
              <th class="px-4 py-2">Correo</th>
              <th class="px-4 py-2">Estado</th>
              <th class="px-4 py-2">Acciones</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let user of filteredUsers; let i = index"
              class="border-b hover:bg-gray-50 cursor-pointer"
              (click)="openDrawer(user)"
            >
              <td class="px-4 py-2">{{ user.name }}</td>
              <td class="px-4 py-2">{{ user.email }}</td>
              <td class="px-4 py-2">
                <span
                  [ngClass]="{
                    'text-green-500': user.status === 'Activo',
                    'text-red-500': user.status === 'Inactivo'
                  }"
                >
                  {{ user.status }}
                </span>
              </td>
              <td class="px-4 py-2">
                <!-- Evitar que el botón dispare el (click) de la fila -->
                <button
                  mat-icon-button
                  class="!text-[#3a5a40]/80"
                  (click)="openDrawer(user)"
                >
                  <lucide-icon name="eye"></lucide-icon>
                </button>

                <!-- <button
                mat-icon-button
                aria-label="menu"
                (click)="removeUser(user); $event.stopPropagation()"
                (click)="closeDrawer()"
                class="!text-white"
              >
                <lucide-icon name="x"></lucide-icon>
              </button> -->
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </mat-drawer-content>
  </mat-drawer-container>
</div>
