import{a as oe,b as A}from"./chunk-3JRXM5CE.js";import"./chunk-RAAZGNEA.js";import{a as ie,b as L,c as ne}from"./chunk-GABFUT62.js";import{a as re}from"./chunk-IK6GKZLO.js";import"./chunk-TPLJ4PUN.js";import"./chunk-MNLYAPXW.js";import{l as te}from"./chunk-EWYMWOI3.js";import"./chunk-HE4HGFF6.js";import{a as X}from"./chunk-HYGMGYDW.js";import{la as ee,s as W,u as Y,w as Z}from"./chunk-GX2JBJOU.js";import{a as J,b as F,d as B,e as K,j as Q}from"./chunk-LKSAQKNU.js";import"./chunk-2PA5JSTX.js";import{l as E,m as v,u as y,w as T}from"./chunk-OE5DTYP4.js";import{Ac as x,Eb as R,Ia as $,J as V,Ja as z,Kb as u,Kc as G,Mb as l,Sb as O,Ub as P,Vb as S,Wb as a,Xb as o,Ya as w,Yb as f,Zb as N,_b as D,a as j,ac as q,b as k,fc as M,hc as g,lb as H,qc as U,rb as s,rc as d,sb as p,sc as I,tc as _,xa as b}from"./chunk-W7KOHNRA.js";function me(r,c){if(r&1&&(N(0),a(1,"a",7),d(2),o(),D()),r&2){let e=g().$implicit;s(),l("routerLink",e.url),s(),_(" ",e.label," ")}}function pe(r,c){if(r&1&&(a(0,"span",8),d(1),o()),r&2){let e=g().$implicit;s(),I(e.label)}}function ue(r,c){r&1&&(a(0,"li")(1,"span",9),d(2,"/"),o()())}function ge(r,c){if(r&1&&(N(0),a(1,"li"),u(2,me,3,2,"ng-container",5)(3,pe,2,1,"ng-template",null,0,G),o(),u(5,ue,3,0,"li",6),D()),r&2){let e=c.last,i=U(4);s(2),l("ngIf",!e)("ngIfElse",i),s(3),l("ngIf",!e)}}function fe(r,c){if(r&1&&(a(0,"div",10),d(1),o()),r&2){let e=g();s(),_("Filtro: ",e.filter,"")}}var le=(()=>{class r{constructor(e,i){this.router=e,this.route=i,this.breadcrumbs=[],this.filter=null}ngOnInit(){this.generateBreadcrumbs(),this.router.events.pipe(V(e=>e instanceof J)).subscribe(()=>{this.generateBreadcrumbs()}),this.route.queryParams.subscribe(e=>{this.filter=e.filter||null})}generateBreadcrumbs(){let e=this.route.snapshot.queryParams,i=e.flowerType||null,t=e.category||null,n=[{label:"Tienda",url:"/online-store"}];if(t){let m=this.formatLabel(t.replace(/-/g," "));n.push({label:m,url:`/online-store?category=${t}${i?"&flowerType="+i:""}`})}if(i){let m=this.formatLabel(i.replace(/-/g," "));n.push({label:m,url:`/online-store?${t?"category="+t+"&":""}flowerType=${i}`})}if(!t&&!i){let h=this.createBreadcrumbs(this.route.root).filter(C=>C.label.toLowerCase()!=="online store");n=[...n,...h]}this.breadcrumbs=n}createBreadcrumbs(e,i="",t=[]){let n=e.children;if(n.length===0)return t;for(let m of n){let h=m.snapshot.url.map(C=>C.path).join("/");if(h!==""){i+=`/${h}`;let C=m.snapshot.data.breadcrumb||this.formatLabel(h);t.push({label:C,url:i})}return this.createBreadcrumbs(m,i,t)}return t}formatLabel(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}static{this.\u0275fac=function(i){return new(i||r)(p(B),p(F))}}static{this.\u0275cmp=b({type:r,selectors:[["app-breadcrumb"]],standalone:!0,features:[x],decls:4,vars:2,consts:[["lastBreadcrumb",""],[1,"bg-transparent","py-3","px-4","rounded"],[1,"flex","items-center","space-x-2","text-sm","text-gray-600"],[4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"text-gray-500","hover:underline",3,"routerLink"],[1,"font-medium","text-gray-900"],[1,"text-gray-400"],[1,"mt-2"]],template:function(i,t){i&1&&(a(0,"nav",1)(1,"ol",2),u(2,ge,6,3,"ng-container",3),o(),u(3,fe,2,1,"div",4),o()),i&2&&(s(2),l("ngForOf",t.breadcrumbs),s(),l("ngIf",t.filter))},dependencies:[y,E,v,Q,K],styles:['.breadcrumb[_ngcontent-%COMP%]{background:none;padding:0;margin:0;list-style:none}.breadcrumb-item[_ngcontent-%COMP%] + .breadcrumb-item[_ngcontent-%COMP%]:before{content:">";margin:0 5px;color:gray}.breadcrumb-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#00f}.breadcrumb-item.active[_ngcontent-%COMP%]{color:#000}.filter-info[_ngcontent-%COMP%]{margin-top:10px;font-size:14px;color:#555}']})}}return r})();function he(r,c){if(r&1&&(a(0,"swiper-slide")(1,"div",2),f(2,"img",3),o()()),r&2){let e=c.$implicit;s(2),l("src",e.url,H)}}function _e(r,c){if(r&1&&(a(0,"swiper-container",1),P(1,he,3,1,"swiper-slide",null,O),o()),r&2){let e=g();s(),S(e.images)}}L();var ce=(()=>{class r{constructor(e){this.platformId=e,this.images=[],this.isBrowser=T(this.platformId)}ngOnInit(){this.images?.length>0&&console.log("Carousel images:",this.images)}ngAfterViewInit(){if(this.isBrowser){let e=document.querySelector("swiper-container");e&&(Object.assign(e,{initialSlide:0}),e.initialize())}}static{this.\u0275fac=function(i){return new(i||r)(p(w))}}static{this.\u0275cmp=b({type:r,selectors:[["app-carrousel-swiper-store"]],inputs:{images:"images"},standalone:!0,features:[x],decls:1,vars:1,consts:[["style","--swiper-navigation-color: #588157; --swiper-pagination-color: #588157","navigation","true","pagination","true","pagination-clickable","true","grab-cursor","true","centered-slides","true","slides-per-view","1","slides-per-group","1","autoplay-delay","5000","autoplay-disable-on-interaction","false","loop","true","space-between","30","observer","true","observe-parents","true","observer-sliders","true",4,"ngIf"],["navigation","true","pagination","true","pagination-clickable","true","grab-cursor","true","centered-slides","true","slides-per-view","1","slides-per-group","1","autoplay-delay","5000","autoplay-disable-on-interaction","false","loop","true","space-between","30","observer","true","observe-parents","true","observer-sliders","true",2,"--swiper-navigation-color","#588157","--swiper-pagination-color","#588157"],[1,"swiper-slide__container"],["alt","Banner image","loading","eager",1,"swiper-slide__img",3,"src"]],template:function(i,t){i&1&&u(0,_e,3,0,"swiper-container",0),i&2&&l("ngIf",t.isBrowser)},dependencies:[y,v],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}swiper-container[_ngcontent-%COMP%]{width:100%;height:100%}.swiper-slide__container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#f8f8f8;padding:1rem}.swiper-slide__img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;border-radius:4px}swiper-slide[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}swiper-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:4px;overflow:hidden;width:100%;height:100%;display:block}"]})}}return r})();function be(r,c){r&1&&(a(0,"div",29)(1,"p",30),d(2,"Loading banners..."),o()())}function xe(r,c){if(r&1&&(a(0,"div",31)(1,"p",32),d(2),o()()),r&2){let e=g();s(2),I(e.error)}}function ve(r,c){if(r&1&&f(0,"app-carrousel-swiper-store",33),r&2){let e=g();l("images",e.imgHeader)}}function ye(r,c){r&1&&(a(0,"div",29)(1,"p",30),d(2,"No banners available"),o()())}function Ce(r,c){if(r&1){let e=q();a(0,"li",36),M("click",function(){let t=$(e).$implicit,n=g(2);return z(n.selectOrder(t))}),d(1),o()}if(r&2){let e=c.$implicit;s(),_(" ",e.text," ")}}function we(r,c){if(r&1&&(a(0,"ul",34),u(1,Ce,2,1,"li",35),o()),r&2){let e=g();s(),l("ngForOf",e.orderOptions)}}function Oe(r,c){if(r&1&&f(0,"app-card-item",37),r&2){let e=c.$implicit;l("name",e.name)("description",e.description)("price",e.price)("image",e.images[0])("category",e.category)("isNew",e.isNew)("product",e)}}L();var it=(()=>{class r{constructor(e,i,t,n,m,h){this.platformId=e,this.router=i,this.store=t,this.route=n,this._productsService=m,this.storeConfigService=h,this.coleccionesTipos=["Primavera","Verano","Oto\xF1o","Invierno","Colecci\xF3n Especial","Novedades"],this.selectedOrder="ascendente",this.selectedOrderText="Ascendente",this.dropdownOpen=!1,this.products=R([]),this.isLoading=R(!1),this.error=null,this.imgHeader=[],this.orderOptions=[{value:"ascendente",text:"Ascendente"},{value:"descendente",text:"Descendente"},{value:"mayorValor",text:"Mayor Valor"},{value:"menorValor",text:"Menor Valor"}],this.currentFilters={},this.priceRange={min:"",max:""},this.items=[{name:"Ramo de rosas",description:"Hermoso ramo de rosas rojas",price:300},{name:"Flor de lis",description:"Ramo de flores frescas de lis",price:150},{name:"Ramo de girasoles",description:"Ramo de girasoles de campo",price:200},{name:"Tulipanes",description:"Ramo de tulipanes coloridos",price:250}],this.filteredItems=[...this.items],this.selectedCategory="",this.isBrowser=T(this.platformId),this.temporada=this.obtenerTemporada()}openLeftDrawer(){this.store.dispatch(A({isOpen:!0}))}applyFilter(){this.selectedOrder==="ascendente"?this.filteredItems=[...this.items].sort((e,i)=>e.price-i.price):this.selectedOrder==="descendente"?this.filteredItems=[...this.items].sort((e,i)=>i.price-e.price):this.selectedOrder==="mayorValor"?this.filteredItems=[...this.items].sort((e,i)=>i.price-e.price):this.selectedOrder==="menorValor"&&(this.filteredItems=[...this.items].sort((e,i)=>e.price-i.price))}ngOnInit(){this.route.queryParams.subscribe(e=>{let i=e.minPrice?Number(e.minPrice):void 0,t=e.maxPrice?Number(e.maxPrice):void 0;if(this.priceRange={min:i?.toString()||"",max:t?.toString()||""},this.currentFilters={category:e.category,tag:e.tag,minPrice:i,maxPrice:t,order:e.order},e.order){this.selectedOrder=e.order;let n=this.orderOptions.find(m=>m.value===e.order);n&&(this.selectedOrderText=n.text)}this.loadProducts(this.currentFilters)}),this.loadBanners()}loadBanners(){this.isLoading.set(!0),this.error=null,this.storeConfigService.getStoreBanners().subscribe({next:e=>{console.log(e),this.imgHeader=e.sort((i,t)=>i.order-t.order),this.isLoading.set(!1)},error:e=>{this.error="Error loading banners",this.isLoading.set(!1),console.error("Error loading banners:",e)}})}openLeftFiltersDrawer(){this.store.dispatch(A({isOpen:!0}))}getProductsFindActive(){this._productsService.getProductsFindActive().subscribe({next:e=>{this.products.set([...e])},error:e=>{console.error("Error fetching products:",e)}})}selectCategory(e){this.selectedCategory=e}obtenerTemporada(){let e=new Date().getMonth();return e>=2&&e<=4?"Primavera":e>=5&&e<=7?"Verano":e>=8&&e<=10?"Oto\xF1o":"Invierno"}loadProducts(e){this.isLoading.set(!0),this._productsService.getProductsFindActive(e).subscribe({next:i=>{let t=[...i];e?.order&&(t=this.orderProducts(t,e.order)),this.products.set(t),this.isLoading.set(!1)},error:i=>{console.error("Error fetching products:",i),this.isLoading.set(!1)}})}orderProducts(e,i){switch(i){case"ascendente":return[...e].sort((t,n)=>t.price-n.price);case"descendente":return[...e].sort((t,n)=>n.price-t.price);case"mayorValor":return[...e].sort((t,n)=>n.price-t.price);case"menorValor":return[...e].sort((t,n)=>t.price-n.price);default:return e}}onFiltersChanged(e){let i=this.priceRange.min?Number(this.priceRange.min):void 0,t=this.priceRange.max?Number(this.priceRange.max):void 0,n=k(j({},this.currentFilters),{category:e.category,tag:e.tag,minPrice:i,maxPrice:t});this.router.navigate([],{relativeTo:this.route,queryParams:{category:e.category,tag:e.tag,minPrice:i,maxPrice:t},queryParamsHandling:"merge"}),this.currentFilters=n,this.loadProducts(n)}toggleDropdown(){this.dropdownOpen=!this.dropdownOpen}selectOrder(e){this.selectedOrder=e.value,this.selectedOrderText=e.text,this.dropdownOpen=!1,this.currentFilters=k(j({},this.currentFilters),{order:e.value}),this.router.navigate([],{relativeTo:this.route,queryParams:{order:e.value},queryParamsHandling:"merge"}),this.loadProducts(this.currentFilters)}static{this.\u0275fac=function(i){return new(i||r)(p(w),p(B),p(te),p(F),p(re),p(ne))}}static{this.\u0275cmp=b({type:r,selectors:[["app-online-store"]],standalone:!0,features:[x],decls:39,vars:10,consts:[[1,"online-store-container"],[1,"online-store","mb-8"],[1,"hidden","lg:block","left"],[1,"right"],[1,"h-10","w-full"],[1,"header","h-[400px]","relative","mb-8"],[1,"carrousel","h-full"],[1,"carrousel-items","h-full"],["class","w-full h-full flex items-center justify-center bg-gray-100",4,"ngIf"],["class","w-full h-full flex items-center justify-center bg-red-50",4,"ngIf"],["class","block h-full",3,"images",4,"ngIf"],[1,"w-full"],[1,"flex","flex-col","md:flex-row","gap-2","justify-between","md:items-center","mb-6"],[1,"w-full","flex","justify-between","items-center"],[1,"block","lg:hidden"],[1,""],[1,"px-4","py-2","rounded-[4px]","border","border-black/10","min:w-[100px]"],[1,"w-full","h-full","flex","items-center","gap-4",3,"click"],[1,"text-sm","font-medium"],["name","list-filter",1,"text-black",3,"size"],[1,"flex","items-center","space-x-4"],["for","orderBy",1,"text-sm","font-medium"],[1,"relative"],[1,"border","px-4","py-2","pr-8","rounded-[4px]","text-sm","bg-white","cursor-pointer","relative",3,"click"],[1,"absolute","inset-y-0","right-2","flex","items-center","pointer-events-none"],["name","chevron-down",1,"w-4","h-4","text-black","z-10"],["class","absolute top-full left-0 w-full bg-white border mt-1 rounded-md shadow-md z-10",4,"ngIf"],[1,"min-w-[150px]","hidden","lg:block","text-sm","font-medium"],[1,"grid","justify-items-center","grid-cols-1","md:grid-cols-2","xl:grid-cols-3","gap-4","h-full"],[1,"w-full","h-full","flex","items-center","justify-center","bg-gray-100"],[1,"text-gray-500"],[1,"w-full","h-full","flex","items-center","justify-center","bg-red-50"],[1,"text-red-500"],[1,"block","h-full",3,"images"],[1,"absolute","top-full","left-0","w-full","bg-white","border","mt-1","rounded-md","shadow-md","z-10"],["class","px-4 py-2 text-sm cursor-pointer hover:bg-green-200",3,"click",4,"ngFor","ngForOf"],[1,"px-4","py-2","text-sm","cursor-pointer","hover:bg-green-200",3,"click"],[3,"name","description","price","image","category","isNew","product"]],template:function(i,t){i&1&&(a(0,"div",0)(1,"div",1)(2,"div",2),f(3,"app-shop-filters"),o(),a(4,"div",3)(5,"div",4),f(6,"app-breadcrumb"),o(),a(7,"div",5)(8,"div",6)(9,"div",7),u(10,be,3,0,"div",8)(11,xe,3,1,"div",9)(12,ve,1,1,"app-carrousel-swiper-store",10)(13,ye,3,0,"div",8),o()()(),a(14,"div",11)(15,"div",12)(16,"div",13)(17,"div",14)(18,"div",15)(19,"button",16)(20,"div",17),M("click",function(){return t.openLeftFiltersDrawer()}),a(21,"span",18),d(22,"Filtros"),o(),f(23,"lucide-icon",19),o()()()(),a(24,"div",20)(25,"label",21),d(26,"Orden:"),o(),a(27,"div",22)(28,"div",23),M("click",function(){return t.toggleDropdown()}),d(29),a(30,"div",24),f(31,"lucide-icon",25),o()(),u(32,we,2,1,"ul",26),o()()(),a(33,"div",27)(34,"span"),d(35),o()()(),a(36,"div",28),P(37,Oe,1,7,"app-card-item",null,O),o()()()()()),i&2&&(s(8),l("@zoomIn",void 0)("@zoomOut",void 0),s(2),l("ngIf",t.isLoading()),s(),l("ngIf",t.error),s(),l("ngIf",!t.isLoading()&&!t.error&&t.imgHeader.length>0),s(),l("ngIf",!t.isLoading()&&!t.error&&t.imgHeader.length===0),s(10),l("size",16),s(6),_(" ",t.selectedOrderText," "),s(3),l("ngIf",t.dropdownOpen),s(3),_("",t.products().length," Items disponibles"),s(2),S(t.products()))},dependencies:[y,E,v,ie,oe,le,ce,W,Z,Y,ee],styles:['@charset "UTF-8";.online-store-container[_ngcontent-%COMP%]{width:calc(100% - 2rem);margin:1rem;border-radius:12px;display:flex;justify-content:center;align-items:center;gap:1rem}.online-store-container[_ngcontent-%COMP%]   .online-store[_ngcontent-%COMP%]{width:100%;max-width:1200px;height:100%;display:flex;justify-content:space-between;align-items:flex-start;gap:1rem}.online-store-container[_ngcontent-%COMP%]   .online-store[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:80%;height:100%;flex:1;display:flex;flex-direction:column;border-radius:12px;gap:1rem}.online-store-container[_ngcontent-%COMP%]   .online-store[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:100%;height:20%;display:flex;justify-content:center;align-items:center;border-radius:12px}.online-store-container[_ngcontent-%COMP%]   .online-store[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:80%;padding:1rem;gap:2rem;overflow:hidden}.online-store-container[_ngcontent-%COMP%]   .online-store[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:100%;height:120px;display:flex;justify-content:center;align-items:center;border-radius:8px;background-color:#0000}.online-store-container[_ngcontent-%COMP%]   .online-store[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .container__items[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;gap:1rem;flex-wrap:wrap;overflow-y:auto}.carrousel[_ngcontent-%COMP%]{width:100%;height:260px}.carrousel[_ngcontent-%COMP%]   .carrousel-items[_ngcontent-%COMP%]{width:100%;height:100%}'],data:{animation:[X]}})}}return r})();export{it as default};
