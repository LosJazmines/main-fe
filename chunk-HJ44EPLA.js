import{a as d}from"./chunk-HE4HGFF6.js";import{d as n}from"./chunk-2PA5JSTX.js";import{ka as r,pa as a,u as s}from"./chunk-W7KOHNRA.js";var o=function(t){return t.PENDING="pending",t.COMPLETED="completed",t.CANCELLED="cancelled",t}(o||{});var c=(()=>{class t{validateDeliveryAddress(i){return i.metodoEnvio==="PICKUP"?{isValid:!0,message:""}:i.metodoEnvio==="DELIVERY"?!i.direccion||i.direccion.trim()===""?{isValid:!1,message:"La direcci\xF3n es requerida para entrega a domicilio"}:!i.ciudad||i.ciudad.trim()===""?{isValid:!1,message:"La ciudad es requerida para entrega a domicilio"}:!i.estado||i.estado.trim()===""?{isValid:!1,message:"El estado es requerido para entrega a domicilio"}:!i.pais||i.pais.trim()===""?{isValid:!1,message:"El pa\xEDs es requerido para entrega a domicilio"}:{isValid:!0,message:""}:{isValid:!1,message:"M\xE9todo de env\xEDo no v\xE1lido"}}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=r({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var E=(()=>{class t{constructor(i,e){this.http=i,this.addressValidationService=e,this.apiUrl=`${d.api}/orders`}getOrders(){return this.http.get(this.apiUrl)}getUserOrders(i){return this.http.get(`${this.apiUrl}/user/${i}`)}getOrderById(i){return this.http.get(`${this.apiUrl}/${i}`)}createOrder(i){if(!i.metodoEnvio)return s(()=>new Error("El m\xE9todo de env\xEDo es requerido"));let e=this.addressValidationService.validateDeliveryAddress({metodoEnvio:i.metodoEnvio,direccion:i.direccion,ciudad:i.ciudad,estado:i.estado,pais:i.pais});return e.isValid?this.http.post(this.apiUrl,i):s(()=>new Error(e.message))}updateOrderStatus(i,e){return this.http.patch(`${this.apiUrl}/${i}/status`,{status:e})}cancelOrder(i){return this.http.patch(`${this.apiUrl}/${i}/status`,{status:o.CANCELLED})}static{this.\u0275fac=function(e){return new(e||t)(a(n),a(c))}}static{this.\u0275prov=r({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{E as a};
